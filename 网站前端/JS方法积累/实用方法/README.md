# JSæ–¹æ³•ç§¯ç´¯â€”â€”å®ç”¨æ–¹æ³•

## ç›®å½•
1. [åŸç”ŸJSæ–¹æ³•](#åŸç”Ÿjsæ–¹æ³•)

    1. æ ¹æ®UAåˆ¤æ–­

        1. [åˆ¤æ–­æ‰€åœ¨ç³»ç»Ÿ](#åŸç”Ÿjsåˆ¤æ–­æ‰€åœ¨ç³»ç»Ÿ)
        1. [åˆ¤æ–­ç§»åŠ¨å¹³å°](#åŸç”Ÿjsåˆ¤æ–­ç§»åŠ¨å¹³å°)
        1. [åˆ¤æ–­ie6ã€7ã€8ã€9ç‰ˆæœ¬](#åŸç”Ÿjsåˆ¤æ–­ie6789ç‰ˆæœ¬)
        1. [åˆ¤æ–­ieæ‰€æœ‰ç‰ˆæœ¬](#åŸç”Ÿjsåˆ¤æ–­ieæ‰€æœ‰ç‰ˆæœ¬)
    1. `key-value`æ“ä½œ
    
        1. [æ“ä½œcookie](#åŸç”Ÿjsæ“ä½œcookie)
        1. [è·å–URLç›¸å…³ä¿¡æ¯](#åŸç”Ÿjsè·å–urlç›¸å…³ä¿¡æ¯)
        1. [åœ¨URLæœ«å°¾æ·»åŠ æŸ¥è¯¢åå€¼å¯¹](#åŸç”Ÿjsåœ¨urlæœ«å°¾æ·»åŠ æŸ¥è¯¢åå€¼å¯¹)
    1. äº‹ä»¶ç›¸å…³
    
        1. [ç»‘å®šã€è§£ç»‘äº‹ä»¶](#åŸç”Ÿjsç»‘å®šè§£ç»‘äº‹ä»¶)
        1. [é˜»æ­¢å†’æ³¡å’Œé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º](#åŸç”Ÿjsjqueryé˜»æ­¢å†’æ³¡å’Œé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º)
        1. [å®ç°åˆ¤æ–­æŒ‰ä¸‹å…·ä½“æŸé”®å€¼](#åŸç”Ÿjsjqueryå®ç°åˆ¤æ–­æŒ‰ä¸‹å…·ä½“æŸé”®å€¼)
        1. [æ‹–æ‹½å’Œæ”¾ä¸‹](#åŸç”Ÿjsæ‹–æ‹½å’Œæ”¾ä¸‹)
        1. [è§¦æ‘¸å±æ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶ï¼ˆæ¶ˆé™¤â€œå»¶æ—¶300æ¯«ç§’åæ‰è§¦å‘clickäº‹ä»¶â€ï¼Œä½¿ç‚¹å‡»äº‹ä»¶æå‰è§¦å‘ï¼‰](#åŸç”Ÿjsè§¦æ‘¸å±æ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶æ¶ˆé™¤å»¶æ—¶300æ¯«ç§’åæ‰è§¦å‘clickäº‹ä»¶ä½¿ç‚¹å‡»äº‹ä»¶æå‰è§¦å‘)        
        1. [åˆ¤æ–­äº‹ä»¶åœ¨æµè§ˆå™¨æ˜¯å¦å­˜åœ¨](#åŸç”Ÿjsåˆ¤æ–­äº‹ä»¶åœ¨æµè§ˆå™¨æ˜¯å¦å­˜åœ¨)
    1. æ•°å­—è®¡ç®—
    
        1. [ç§‘å­¦è®¡æ•°æ³•è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ•°å­—](#åŸç”Ÿjsç§‘å­¦è®¡æ•°æ³•è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ•°å­—)
        1. [ç”¨æ•´æ•°è¿›è¡Œå°æ•°çš„å››åˆ™è¿ç®—ï¼ˆé¿å…æµ®ç‚¹æ•°è¿ç®—è¯¯å·®ï¼‰](#åŸç”Ÿjsç”¨æ•´æ•°è¿›è¡Œå°æ•°çš„å››åˆ™è¿ç®—é¿å…æµ®ç‚¹æ•°è¿ç®—è¯¯å·®)
        1. [å¤§æ•°åŠ å‡æ³•ï¼ˆä¸è€ƒè™‘å°æ•°å’Œè´Ÿæ•°ï¼‰](#åŸç”Ÿjså¤§æ•°åŠ å‡æ³•ä¸è€ƒè™‘å°æ•°å’Œè´Ÿæ•°)
        1. [ä¸åŒè¿›åˆ¶æ•°è½¬æ¢](#åŸç”Ÿjsä¸åŒè¿›åˆ¶æ•°è½¬æ¢)
        1. [é€‰å–èŒƒå›´å†…éšæœºå€¼](#åŸç”Ÿjsé€‰å–èŒƒå›´å†…éšæœºå€¼)
    1. å­—ç¬¦ä¸²æ“ä½œ
    
        1. [è½¬åŒ–ä¸ºUnicodeã€åè½¬å­—ç¬¦ä¸²](#åŸç”Ÿjsè½¬åŒ–ä¸ºunicodeåè½¬å­—ç¬¦ä¸²)
        1. [äº§ç”Ÿéšæœºæ•°](#åŸç”Ÿjsäº§ç”Ÿéšæœºæ•°)
        1. [æ¯”è¾ƒç‰ˆæœ¬å·å¤§å°ï¼ˆçº¯æ•°å­—ï¼‰](#åŸç”Ÿjsæ¯”è¾ƒç‰ˆæœ¬å·å¤§å°çº¯æ•°å­—)
        1. [åˆ¤æ–­æ£€ç´¢å†…å®¹æ˜¯å¦åœ¨è¢«æ£€ç´¢å†…å®¹çš„åˆ†éš”ç¬¦é—´](#åŸç”Ÿjsåˆ¤æ–­æ£€ç´¢å†…å®¹æ˜¯å¦åœ¨è¢«æ£€ç´¢å†…å®¹çš„åˆ†éš”ç¬¦é—´)
        1. [æ ¼å¼åŒ–æ–‡ä»¶å¤§å°](#åŸç”Ÿjsæ ¼å¼åŒ–æ–‡ä»¶å¤§å°)
    1. åŠŸèƒ½
    
        1. [å®ç°ç±»ä¼¼jQueryçš„`$('html,body').animate({'scrollLeft': åƒç´ , 'scrollTop': åƒç´ }, æ¯«ç§’);`](#åŸç”Ÿjså®ç°ç±»ä¼¼jqueryçš„htmlbodyanimatescrollleft-åƒç´ -scrolltop-åƒç´ -æ¯«ç§’)
        1. [ç”¨è¯·æ±‚å›¾ç‰‡ä½œlogç»Ÿè®¡](#åŸç”Ÿjsç”¨è¯·æ±‚å›¾ç‰‡ä½œlogç»Ÿè®¡)
        1. [åˆ¤æ–­æ˜¯å¦ä¸º`Node`ã€æ˜¯å¦ä¸º`Element`](#åŸç”Ÿjsåˆ¤æ–­æ˜¯å¦ä¸ºnodeæ˜¯å¦ä¸ºelement)
        1. [åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º](#åŸç”Ÿjsåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º)
        1. [è¾“å…¥æ¡†å…‰æ ‡ä½ç½®çš„è·å–å’Œè®¾ç½®](#åŸç”Ÿjsè¾“å…¥æ¡†å…‰æ ‡ä½ç½®çš„è·å–å’Œè®¾ç½®)
        1. [é˜»æ­¢åµŒå…¥æ»šåŠ¨æ¡å†’æ³¡â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼ˆiOSï¼‰](#åŸç”Ÿjsé˜»æ­¢åµŒå…¥æ»šåŠ¨æ¡å†’æ³¡æ©¡çš®ç­‹æ•ˆæœios)
        1. [è·å–æ»šåŠ¨è½´å®½åº¦ï¼ˆæˆ–é«˜åº¦ï¼‰](#åŸç”Ÿjsè·å–æ»šåŠ¨è½´å®½åº¦æˆ–é«˜åº¦)
        1. [é˜²æŠ–å‡½æ•°](#åŸç”Ÿjsé˜²æŠ–å‡½æ•°)
        1. [èŠ‚æµå‡½æ•°](#åŸç”ŸjsèŠ‚æµå‡½æ•°)
        1. [éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§](#åŸç”ŸjséªŒè¯é‚®ç®±æœ‰æ•ˆæ€§)
        1. [åˆ›å»ºå…¼å®¹çš„XHRå¯¹è±¡](#åŸç”Ÿjsåˆ›å»ºå…¼å®¹çš„xhrå¯¹è±¡)
        1. [åŠ¨æ€æ·»åŠ è„šæœ¬ã€æ ·å¼](#åŸç”ŸjsåŠ¨æ€æ·»åŠ è„šæœ¬æ ·å¼)
        1. [å•è¯é¦–å­—æ¯å¤§å†™](#åŸç”Ÿjså•è¯é¦–å­—æ¯å¤§å†™)
        1. [å±•ç¤ºé¡µé¢å¸§æ•°](#åŸç”Ÿjså±•ç¤ºé¡µé¢å¸§æ•°)
        1. [è·å–æ˜Ÿåº§](#åŸç”Ÿjsè·å–æ˜Ÿåº§)
        1. [åˆ†å‰²æ•°ç»„](#åŸç”Ÿjsåˆ†å‰²æ•°ç»„)
        1. [åŠ å…¥æ”¶è—å¤¹](#åŸç”ŸjsåŠ å…¥æ”¶è—å¤¹)
        1. [ä»å­—ç¬¦ä¸²ä¸­è·å–ç»å¯¹è·¯å¾„](#åŸç”Ÿjsä»å­—ç¬¦ä¸²ä¸­è·å–ç»å¯¹è·¯å¾„)
    1. å…¼å®¹æ€§
    
        1. [ç”¨`setTimeout`æ¨¡æ‹Ÿ`setInterval`](#åŸç”Ÿjsç”¨settimeoutæ¨¡æ‹Ÿsetinterval)
        1. [`requestAnimationFrame`çš„é€’å½’](#åŸç”Ÿjsrequestanimationframeçš„é€’å½’)   
        1. [Polyfill](#polyfill)
        
            1. [`requestAnimationFrame`å’Œ`cancelAnimationFrame`](#åŸç”Ÿjsrequestanimationframeå’Œcancelanimationframeçš„polyfill)
            1. [`Date.now`](#åŸç”Ÿjsdatenowçš„polyfill)
            1. [`Object.create`](#åŸç”Ÿjsobjectcreateçš„polyfill)
            1. [`Array.isArray`](#åŸç”Ÿjsarrayisarrayçš„polyfill)
            1. [`Array.prototype.map`](#åŸç”Ÿjsarrayprototypemapçš„polyfill)
            1. [`Function.prototype.bind`](#åŸç”Ÿjsfunctionprototypebindçš„polyfill)
            1. [`String.prototype.trim`](#åŸç”Ÿjsstringprototypetrimçš„polyfill)
            1. [`String.prototype.repeat`](#åŸç”Ÿjsstringprototyperepeatçš„polyfill)
            1. [`Number.isNaN`](#åŸç”Ÿjsnumberisnançš„polyfill)
            1. [`Number.isFinite`](#åŸç”Ÿjsnumberisfiniteçš„polyfill)
            1. [`Number.isInteger`](#åŸç”Ÿjsnumberisintegerçš„polyfill)
            1. [`Number.isSafeInteger`](#åŸç”Ÿjsnumberissafeintegerçš„polyfill)
1. [jQueryæ–¹æ³•](#jqueryæ–¹æ³•)

    1. å»¶è¿Ÿå¼‚æ­¥åŠ è½½
        
        1. [æ»šåŠ¨åŠ è½½](#jqueryæ»šåŠ¨åŠ è½½)
        1. [å›¾ç‰‡å»¶æ—¶åŠ è½½](#jqueryå›¾ç‰‡å»¶æ—¶åŠ è½½)
    1. [èŠ‚ç‚¹è·Ÿéšå±å¹•æ»šåŠ¨](#jqueryèŠ‚ç‚¹è·Ÿéšå±å¹•æ»šåŠ¨)      
    1. [å¼¹å‡ºtoast](#jqueryå¼¹å‡ºtoast)
    1. [å…¨é€‰ã€å–æ¶ˆå…¨é€‰](#jqueryå…¨é€‰å–æ¶ˆå…¨é€‰)
    1. [ç‚¹å‡»æŒ‡å®šåŒºåŸŸä»¥å¤–æ‰§è¡Œå‡½æ•°](#jqueryç‚¹å‡»æŒ‡å®šåŒºåŸŸä»¥å¤–æ‰§è¡Œå‡½æ•°)
    1. [hoverå±•ç¤ºå†…å®¹å¹¶ä¸”å¯è·¨è¶Šé—´éš™åˆ°å†…å®¹](#jquery-hoverå±•ç¤ºå†…å®¹å¹¶ä¸”å¯è·¨è¶Šé—´éš™åˆ°å†…å®¹)
    1. [å¯åŠ¨ã€æš‚åœCSSåŠ¨ç”»](#jqueryå¯åŠ¨æš‚åœcssåŠ¨ç”»)
    1. [è·å–`HTTP response header`ä¿¡æ¯](#jqueryè·å–http-response-headerä¿¡æ¯)
    1. [ä¿®å¤HTMLæ ‡ç­¾`placeholder`å±æ€§æ— æ•ˆ](#jqueryä¿®å¤htmlæ ‡ç­¾placeholderå±æ€§æ— æ•ˆ)
    1. [æ¨¡æ‹Ÿæ‰‹æœºç¿»è½¬ï¼ˆä½¿é¡µé¢éƒ½ä»¥â€œæ¨ªå±â€å±•ç¤ºï¼‰](#jqueryæ¨¡æ‹Ÿæ‰‹æœºç¿»è½¬ä½¿é¡µé¢éƒ½ä»¥æ¨ªå±å±•ç¤º)

    >å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒjQueryå†…å®¹é€‚ç”¨äºZeptoã€‚

## åŸç”ŸJSæ–¹æ³•

### *åŸç”ŸJS*åˆ¤æ–­æ‰€åœ¨ç³»ç»Ÿ
```javascript
function detectOS (ua, pf) {
  ua = ua || window.navigator.userAgent
  pf = window.navigator.platform

  var os = ''

  if (/iPhone|iPad|iPod|iOS/.test(ua)) {
    os = 'iOS'
  } else if (/Android/.test(ua)) {
    os = 'Android'
  } else if (/\bWindows Phone/.test(ua)) {
    os = 'Windows Phone'
  } else {
    if (pf === 'Mac68K' || pf === 'MacPPC' || pf === 'Macintosh' || pf === 'MacIntel') {
      os = 'macOS'
    } else if (pf === 'Win32' || pf === 'Windows') {
      if (/Windows NT 5.0/.test(ua) || /Windows 2000/.test(ua)) {
        os = 'Win2000'
      } else if (/Windows NT 5.1/.test(ua) || /Windows XP/.test(ua)) {
        os = 'WinXP'
      } else if (/Windows NT 5.2/.test(ua) || /Windows 2003/.test(ua)) {
        os = 'Win2003'
      } else if (/Windows NT 6.0/.test(ua) || /Windows Vista/.test(ua)) {
        os = 'WinVista'
      } else if (/Windows NT 6.1/.test(ua) || /Windows 7/.test(ua)) {
        os = 'Win7'
      } else if (/Windows NT 10.0/.test(ua) || /Windows 10/.test(ua)) {
        os = 'Win10'
      } else {
        os = 'Windows'
      }
    } else if (pf === 'X11') {
      os = 'Unix'
    } else if (/Linux/.test(pf)) {
      os = 'Linux'
    }
  }

  return os
}
```

### *åŸç”ŸJS*åˆ¤æ–­ç§»åŠ¨å¹³å°
```javascript
// åˆ¤æ–­ç§»åŠ¨å¹³å°ï¼ˆå¾®ä¿¡ã€QQã€å¾®åšã€QQç©ºé—´ï¼‰
function platform (ua) {
  ua = ua || window.navigator.userAgent

  var platform

  if (/MicroMessenger/.test(ua)) {
    platform = 'weixin'
  } else if (/QQ\//.test(ua)) {
    platform = 'qq'
  } else if (/\bWeibo|__weibo__\d/.test(ua)) {
    platform = 'weibo'
  } else if (/Qzone\//.test(ua)) {
    platform = 'qzone'
  } else {
    platform = 'other'
  }

  return platform
}
```

### *åŸç”ŸJS*åˆ¤æ–­ie6ã€7ã€8ã€9ç‰ˆæœ¬
>HTMLæ¡ä»¶æ³¨é‡Šæ³•ä»…æ”¯æŒie9-ã€‚

```javascript
/**
 * åˆ¤æ–­ie6ã€7ã€8ã€9ç‰ˆæœ¬
 * @param {Number|String} [num] - ieç‰ˆæœ¬å·ã€‚å¯å¡«6ã€7ã€8ã€9ï¼›è‹¥ä¸ºç©ºåˆ™åªè¦æ˜¯ie6~9åˆ™è¿”å›1
 * @returns {Number} - 0 æˆ– 1
 */
function isIE(num) {
    var dom = document.createElement('b');

    dom.innerHTML = '<!--[if IE ' + num + ']><i></i><![endif]-->';

    return dom.getElementsByTagName('i').length;
}
```

### *åŸç”ŸJS*åˆ¤æ–­ieæ‰€æœ‰ç‰ˆæœ¬
```javascript
/**
 * åˆ¤æ–­ieæ‰€æœ‰ç‰ˆæœ¬
 * @returns {Number} - ieç‰ˆæœ¬å· æˆ– false
 */
function detectIE() {
    var ua = window.navigator.userAgent;

    var msie = ua.indexOf('MSIE ');
    if (msie > 0) {

        /* ie10- è¿”å›ç‰ˆæœ¬å·*/
        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
    }

    var trident = ua.indexOf('Trident/');
    if (trident > 0) {
        var rv = ua.indexOf('rv:');

        /* ie11 è¿”å›ç‰ˆæœ¬å·*/
        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
    }

    var edge = ua.indexOf('Edge/');
    if (edge > 0) {

        /* Edge(ie 12+) è¿”å›ç‰ˆæœ¬å·*/
        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
    }

    /* å…¶ä»–æµè§ˆå™¨ è¿”å›false*/
    return false;
}
```

### *åŸç”ŸJS*æ“ä½œcookie
```javascript
var cookieFuc = {

    /**
     * è¯»å–ä¸€ä¸ªcookieçš„å€¼
     * @param {String} key - å
     * @returns {String|Null} - å€¼ æˆ– null
     */
    getItem: function (key) {
        if (!key) {

            return null;
        } else {

            return decodeURIComponent(document.cookie.replace(new RegExp('(?:(?:^|.*;)\\s*' + encodeURIComponent(key).replace(/[\-\.\+\*]/g, '\\$&') + '\\s*\\=\\s*([^;]*).*$)|^.*$'), '$1')) || null;
        }
    },

    /**
     * æ–°å»ºæˆ–æ›´æ–°ä¸€ä¸ªcookie
     * @param {String} key - å
     * @param {String} value - å€¼
     * @param {Number|Date|String|Infinity} [deadline] - è¿‡æœŸæ—¶é—´ã€‚é»˜è®¤ä¸ºå…³é—­æµè§ˆå™¨åè¿‡æœŸ
     * @param {String} [path] - è·¯å¾„ã€‚é»˜è®¤ä¸ºå½“å‰æ–‡æ¡£ä½ç½®çš„è·¯å¾„
     * @param {String} [domain] - åŸŸåã€‚é»˜è®¤ä¸ºå½“å‰æ–‡æ¡£ä½ç½®çš„è·¯å¾„çš„åŸŸåéƒ¨åˆ†
     * @param {Boolean} [secure] - æ˜¯å¦â€œä»…é€šè¿‡httpsåè®®ä¼ è¾“â€ã€‚é»˜è®¤ä¸ºå¦
     * @returns {Boolean} - æ“ä½œæˆåŠŸæˆ–å¤±è´¥
     */
    setItem: function (key, value, deadline, path, domain, secure) {
        if (!key || /^(?:expires|max\-age|path|domain|secure)$/i.test(key)) {

            return false;
        } else {
            var expires = '';

            if (deadline) {
                switch (deadline.constructor) {
                    case Number:
                        expires = deadline === Infinity ? '; expires=Fri, 31 Dec 9999 23:59:59 GMT' : '; max-age=' + deadline;
                        break;
                    case String:
                        expires = '; expires=' + deadline;
                        break;
                    case Date:
                        expires = '; expires=' + deadline.toUTCString();
                        break;
                }
            }

            document.cookie = encodeURIComponent(key) + '=' + encodeURIComponent(value) + expires + (domain ? '; domain=' + domain : '') + (path ? '; path=' + path : '') + (secure ? '; secure' : '');

            return true;
        }
    },

    /**
     * åˆ é™¤ä¸€ä¸ªcookie
     * @param {String} key - å
     * @param {String} [path] - è·¯å¾„ã€‚é»˜è®¤ä¸ºå½“å‰æ–‡æ¡£ä½ç½®çš„è·¯å¾„
     * @param {String} [domain] - åŸŸåã€‚é»˜è®¤ä¸ºå½“å‰æ–‡æ¡£ä½ç½®çš„è·¯å¾„çš„åŸŸåéƒ¨åˆ†
     * @returns {Boolean} - æ“ä½œæˆåŠŸæˆ–å¤±è´¥
     */
    removeItem: function (key, path, domain) {
        if (!key || !this.hasItem(key)) {

            return false;
        } else {
            document.cookie = encodeURIComponent(key) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT' + ( domain ? '; domain=' + domain : '') + ( path ? '; path=' + path : '');

            return true;
        }
    },

    /**
     * æ£€æŸ¥ä¸€ä¸ªcookieæ˜¯å¦å­˜åœ¨
     * @param {String} key - å
     * @returns {Boolean} - å­˜åœ¨ä¸å¦
     */
    hasItem: function (key) {
        if (!key) {

            return false;
        } else {

            return (new RegExp('(?:^|;\\s*)' + encodeURIComponent(key).replace(/[\-\.\+\*]/g, '\\$&') + '\\s*\\=')).test(document.cookie);
        }
    },

    /**
     * è¿”å›cookieåå­—çš„æ•°ç»„
     * @returns {Array} - åçš„æ•°ç»„ æˆ– []
     */
    listItems: function () {
        if (document.cookie === '') {

            return [];
        } else {
            var keys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, '').split(/\s*(?:\=[^;]*)?;\s*/),
                i, len;

            for (i = 0, len = keys.length; i < len; i++) {
                keys[i] = decodeURIComponent(keys[i]);
            }

            return keys;
        }
    },

    /**
     * æ¸…ç©ºæ‰€æœ‰cookie
     * @returns {Boolean} - æ“ä½œæˆåŠŸæˆ–å¤±è´¥
     */
    clear: function () {
        if (document.cookie === '') {

            return false;
        } else {
            var keys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, '').split(/\s*(?:\=[^;]*)?;\s*/),
                i, len;

            for (i = 0, len = keys.length; i < len; i++) {
                this.removeItem(decodeURIComponent(keys[i]));
            }

            return true;
        }
    }
};
```
>å‚è€ƒ[MDN:cookie](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie#ä¸€ä¸ªå°æ¡†æ¶ï¼šä¸€ä¸ªå®Œæ•´æ”¯æŒunicodeçš„cookieè¯»å–å†™å…¥å™¨)ã€‚

>ç®€å•åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸcookieï¼š
>
>```javascript
>function hasCookie (checkKey) {
>  checkKey = checkKey.toString()
>
>  var cookieArr = document.cookie.split('; '),
>    tempArr, key, value
>
>  for (var i = 0, len = cookieArr.length; i < len; i++) {
>    if (cookieArr[i] !== '') {
>      tempArr = cookieArr[i].split('=')
>      key = tempArr.shift()
>      value = tempArr.join('=')
>
>      if (key === checkKey) {
>        /* æ“ä½œvalue*/
>
>        return true
>      }
>    }
>  }
>
>  return false
>}
>```

### *åŸç”ŸJS*è·å–URLç›¸å…³ä¿¡æ¯
```javascript
/**
 * è·å–URLç›¸å…³ä¿¡æ¯
 * @param {String} [url = window.location.href] - URL
 * @returns {Object} location - åŒ…æ‹¬hrefã€protocolã€hostnameã€portã€pathnameã€searchã€searchObjã€hashçš„å¯¹è±¡
 */
function getLocation (url) {
  url = url || window.location.href

  /* ä¸ºäº†æ–¹ä¾¿é˜…è¯»*/
  var _protocol = /^(?:([A-Za-z]+):)?/.source,
    _slash = /\/*/.source,
    _hostname = /([0-9A-Za-z.\-]+)/.source,
    _port = /(?::(\d+))?/.source,
    _pathname = /(\/[^?#]*)?/.source,
    _search = /(?:\?([^#]*))?/.source,
    _hash = /(?:#(.*))?$/.source

  var regex = new RegExp(_protocol + _slash + _hostname + _port + _pathname + _search + _hash, 'g'),
    regexArr = regex.exec(url),
    keyArr = ['href', 'protocol', 'hostname', 'port', 'pathname', 'search', 'hash'],
    location = { 'searchObj': {} },
    search, searchArr, searchItem, key, value

  keyArr.forEach(function (item, index) {
    location[item] = regexArr[index] || ''
  })

  search = location['search']

  searchArr = search.split('&')

  for (var i = 0, len = searchArr.length; i < len; i++) {
    if (searchArr[i] !== '') {
      searchItem = searchArr[i].split('=')
      key = searchItem.shift()
      value = searchItem.join('=')
      location['searchObj'][key] = value
    }
  }

  return location
}
```
>å‚è€ƒ[ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†æ URL](http://harttle.com/2016/02/23/javascript-regular-expressions.html)ã€‚

>è·å–æŸsearchå€¼ï¼š
>
>```javascript
>/**
> * è·å–æŸsearchå€¼
> * @param {String} checkKey - searchçš„key
> * @param {String} [search = window.location.search] - searchæ€»å­—ç¬¦ä¸²
> * @returns {String|Boolean} - searchçš„value æˆ– ä¸å­˜åœ¨false
> */
>function getSearchValue (checkKey, search) {
>  checkKey = checkKey.toString()
>  search = search || window.location.search
>
>  if (search.slice(0, 1) === '?') {
>    search = search.slice(1)
>  }
>
>  var searchArr = search.split('&'),
>    tempArr, key, value
>
>  for (var i = 0, len = searchArr.length; i < len; i++) {
>    if (searchArr[i] !== '') {
>      tempArr = searchArr[i].split('=')
>      key = tempArr.shift()
>      value = tempArr.join('=')
>
>      if (key === checkKey) {
>
>        return value
>      }
>    }
>  }
>
>  return false
>}
>```

>æ‹¼æ¥æ¥å£urlæ—¶ï¼Œå¯ä»¥åœ¨apiå­—ç¬¦ä¸²æœ€åæ·»åŠ `?`å¹¶ä¸”åŠ ä¸Šä¸€äº›å›ºå®šä¸å˜çš„searchå‚æ•°ï¼Œåœ¨ä½¿ç”¨urlæ—¶å€™éƒ½ä»¥`&å‚æ•°=å€¼`çš„å½¢å¼æ·»åŠ é¢å¤–å‚æ•°ï¼š
>
>>`xxx/xxx?&a=1`å¯ä»¥æ­£å¸¸è§£æ
>
>```javascript
>const api1 = 'xxx/xxx?'
>const api2 = 'xxx/xxx?v=1.0'
>
>// ä½¿ç”¨æ—¶
>url1 = api1 + '&a=1' + '&b=2' + '&c=3'
>url2 = api2 + '&a=1' + '&b=2' + '&c=3'
>```

### *åŸç”ŸJS*åœ¨URLæœ«å°¾æ·»åŠ æŸ¥è¯¢åå€¼å¯¹
```javascript
/**
 * åœ¨URLæœ«å°¾æ·»åŠ searchåå€¼å¯¹
 * @param {String} url - URL
 * @param {String} name - å
 * @param {String} value - å€¼
 * @returns {String} - æ·»åŠ å®Œæ¯•çš„URL
 */
function addUrlSearch(url, name, value) {
    if (!name || !value) {

        return url;
    }

    var hashIndex = url.indexOf('#') !== -1 ? url.indexOf('#') : url.length,
        newUrl = url.slice(0, hashIndex),
        hash = url.slice(hashIndex),
        searchIndex = newUrl.indexOf('?');

    if (searchIndex === -1) {
        newUrl += '?';
    } else if (searchIndex !== newUrl.length - 1) {
        newUrl += '&';
    }

    newUrl += encodeURIComponent(name) + '=' + encodeURIComponent(value) + hash;

    return newUrl;
}
```

### *åŸç”ŸJS*ç»‘å®šã€è§£ç»‘äº‹ä»¶
```javascript
var eventUtil = {

    /**
     * ç»‘å®šäº‹ä»¶
     * @param {Object} dom - DOMå¯¹è±¡
     * @param {String} type - äº‹ä»¶å
     * @param {Function} handle - å¤„ç†å‡½æ•°
     */
    addHandler: function (dom, type, handle) {
        if (typeof dom.addEventListener === 'function') {   /* DOM2çº§ï¼Œé™¤ie8-*/
            dom.addEventListener(type, handle, false);
        } else if (typeof dom.attachEvent === 'function') { /* æ‰€æœ‰ieæµè§ˆå™¨*/
            dom.attachEvent('on' + type, handle);   //æ³¨æ„ä¼ å…¥çš„å‚æ•°å’Œthisçš„å…¼å®¹
        } else {    /* DOM0çº§ï¼Œæœ€æ—©æœŸçš„æµè§ˆå™¨éƒ½æ”¯æŒ*/
            dom['on' + type] = handle;
        }
    },

    /**
     * è§£ç»‘äº‹ä»¶
     * @param {Object} dom - DOMå¯¹è±¡
     * @param {String} type - äº‹ä»¶å
     * @param {Function} handle - å¤„ç†å‡½æ•°
     */
    removeHandler: function (dom, type, handle) {
        if (typeof dom.removeEventListener === 'function') {
            dom.removeEventListener(type, handle, false);
        } else if (typeof dom.detachEvent === 'function') {
            dom.detachEvent('on' + type, handle);   //æ³¨æ„ä¼ å…¥çš„å‚æ•°å’Œthisçš„å…¼å®¹
        } else {
            dom['on' + type] = null;
        }
    }
};
```

### *åŸç”ŸJS*ã€jQueryé˜»æ­¢å†’æ³¡å’Œé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º
1. é˜»æ­¢å†’æ³¡

    1. *åŸç”ŸJS*
    
        ```javascript
        function stopBubble(e) {
            if (e && e.stopPropagation) {
                e.stopPropagation();
            } else {
                window.event.cancelBubble = true;
            }
        }
        ```
    2. jQuery
    
        ```javascript
        $('...').on('...', function (e) {
            e.stopPropagation();
        });
        ```
2. é˜»æ­¢é»˜è®¤è¡Œä¸º

    1. *åŸç”ŸJS*
    
        ```javascript
        function stopDefault(e) {
            if (e && e.preventDefault) {
                e.preventDefault();
            } else {
                window.event.returnValue = false;
            }
        }
        ```
    2. jQuery
    
        ```javascript
        $('...').on('...', function (e) {
            e.preventDefault();
        });
        ```
3. é˜»æ­¢å†’æ³¡ && é˜»æ­¢é»˜è®¤è¡Œä¸º

    1. *åŸç”ŸJS*

        ```javascript
        function returnFalse(e) {
            if (e && e.stopPropagation) {
                e.stopPropagation();
                e.preventDefault();
            } else {
                window.event.cancelBubble = true;
                window.event.returnValue = false;
            }
        }
        ```
    2. jQuery

        ```javascript
        $('...').on('...', function () {
     
            return false;
        });
        // æˆ–ç®€å†™ï¼š$('...').on('...', false);
        ```

### *åŸç”ŸJS*ã€jQueryå®ç°åˆ¤æ–­æŒ‰ä¸‹å…·ä½“æŸé”®å€¼
1. *åŸç”ŸJS*

    ```javascript
    function checkKeyCode(e) {
        var event = e || window.event,
            keyCode = event.charCode || event.keyCode;  /* è·å–é”®å€¼*/
    
        if (keyCode === 13) {   /* æŸ¥è¯¢é”®å€¼è¡¨ ä¾‹:13->æ¢è¡Œ*/
            /* å…·ä½“æ“ä½œ...*/
    
            /* é˜»æ­¢å†’æ³¡&é˜»æ­¢é»˜è®¤è¡Œä¸º*/
            if (e && e.stopPropagation) {
                e.stopPropagation();
                e.preventDefault();
            } else {
                window.event.cancelBubble = true;
                window.event.returnValue = false;
            }
        }
    }
    

    /* ä½¿ç”¨æµ‹è¯•*/
    addEvent(document.getElementById('test'), 'keydown', checkKeyCode);  //ä¸Šé¢ç»‘å®šäº‹ä»¶
    ```
2. jQuery

    ```javascript
    $(è¾“å…¥æ¡†é€‰æ‹©å™¨).on('keydown', function (e) {
        if (e.which === 13) {   /* æŸ¥è¯¢é”®å€¼è¡¨ ä¾‹:13->æ¢è¡Œ*/
            /* å…·ä½“æ“ä½œ...*/
    
            return false;   //é˜»æ­¢å†’æ³¡&é˜»æ­¢é»˜è®¤è¡Œä¸º
        }
    });
    ```

### *åŸç”ŸJS*æ‹–æ‹½å’Œæ”¾ä¸‹
1. PCç«¯çš„é¼ æ ‡äº‹ä»¶

    ```javascript
    function Drag(dom, parentDom) {
        var maxX = parentDom.offsetWidth - dom.offsetWidth,
            maxY = parentDom.offsetHeight - dom.offsetHeight,
            domX, domY, beginX, beginY;

        /* ç»‘å®šäº‹ä»¶*/
        function _addHandler(dom, type, handle) {
            if (typeof dom.addEventListener === 'function') {
                dom.addEventListener(type, handle, false);
            } else if (typeof dom.attachEvent === 'function') {
                dom.attachEvent('on' + type, handle);
            } else {
                dom['on' + type] = handle;
            }
        }

        /* è§£ç»‘äº‹ä»¶*/
        function _removeHandler(dom, type, handle) {
            if (typeof dom.removeEventListener === 'function') {
                dom.removeEventListener(type, handle, false);
            } else if (typeof dom.detachEvent === 'function') {
                dom.detachEvent('on' + type, handle);
            } else {
                dom['on' + type] = null;
            }
        }

        /* é˜»æ­¢å†’æ³¡&é˜»æ­¢é»˜è®¤è¡Œä¸º*/
        function _returnFalse(e) {
            if (e && e.stopPropagation) {
                e.stopPropagation();
                e.preventDefault();
            } else {
                window.event.cancelBubble = true;
                window.event.returnValue = false;
            }
        }

        /* æ‹–æ‹½å¼€å§‹*/
        function actBegin(e) {
            e = e || window.event;

            domX = dom.offsetLeft;
            domY = dom.offsetTop;

            beginX = e.clientX; //æˆ–e.pageX/Yï¼ˆieä¸å…¼å®¹ï¼‰
            beginY = e.clientY;

            _addHandler(parentDom, 'mousemove', actMove);

            _returnFalse(e); //é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º
        }

        /* æ‹–æ‹½ç§»åŠ¨*/
        function actMove(e) {
            e = e || window.event;

            var finalX = e.clientX - beginX + domX,
                finalY = e.clientY - beginY + domY;

            if (finalX > maxX) {
                finalX = maxX;
            } else if (finalX < 0) {
                finalX = 0;
            }
            if (finalY > maxY) {
                finalY = maxY;
            } else if (finalY < 0) {
                finalY = 0;
            }

            /* å…·ä½“ç§»åŠ¨ï¼ˆä½¿ç”¨leftã€topï¼‰*/
            //requestAnimationFrame(function () {
                dom.style.left = finalX + 'px';
                dom.style.top = finalY + 'px';
            //});

            _returnFalse(e); //é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º
        }

        /* æ‹–æ‹½å–æ¶ˆ*/
        function cancel(e) {
            _removeHandler(parentDom, 'mousemove', actMove);

            _returnFalse(e); //é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º
        }

        /* ç»‘å®šäº‹ä»¶*/
        _addHandler(dom, 'mousedown', actBegin);
        _addHandler(parentDom, 'mouseup', cancel);
        _addHandler(parentDom, 'mouseleave', cancel);

        this.stop = function () {
            _removeHandler(dom, 'mousedown', actBegin);
            _removeHandler(parentDom, 'mouseup', cancel);
            _removeHandler(parentDom, 'mouseleave', cancel);
            _removeHandler(parentDom, 'mousemove', actMove);
        };
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    var dom = document.getElementById('j-rect');
    var action = new Drag(dom, dom.offsetParent);

    //action.stop();
    ```
    [JSFiddle Demo](https://jsfiddle.net/realgeoffrey/7t25cm5t/)
2. WAPç«¯çš„touchäº‹ä»¶

    ```javascript
    function Drag(dom, parentDom) {
        var maxX = parentDom.offsetWidth - dom.offsetWidth,
            maxY = parentDom.offsetHeight - dom.offsetHeight,
            domX, domY, beginX, beginY;

        /* æ‹–æ‹½å¼€å§‹*/
        function actBegin(e) {
            domX = dom.offsetLeft;
            domY = dom.offsetTop;

            beginX = e.touches[0].pageX;
            beginY = e.touches[0].pageY;

            parentDom.addEventListener('touchmove', actMove, false);

            /* é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º*/
            e.stopPropagation();
            e.preventDefault();
        }

        /* æ‹–æ‹½ç§»åŠ¨*/
        function actMove(e) {
            var finalX = e.touches[0].pageX - beginX + domX,
                finalY = e.touches[0].pageY - beginY + domY;

            if (finalX > maxX) {
                finalX = maxX;
            } else if (finalX < 0) {
                finalX = 0;
            }
            if (finalY > maxY) {
                finalY = maxY;
            } else if (finalY < 0) {
                finalY = 0;
            }

            /* å…·ä½“ç§»åŠ¨ï¼ˆä½¿ç”¨leftã€topï¼‰*/
            requestAnimationFrame(function () {
                dom.style.left = finalX + 'px';
                dom.style.top = finalY + 'px';
            });

            /* é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º*/
            e.stopPropagation();
            e.preventDefault();
        }

        /* æ‹–æ‹½å–æ¶ˆ*/
        function cancel(e) {
            parentDom.removeEventListener('touchmove', actMove, false);

            /* é˜»æ­¢å†’æ³¡ã€é˜»æ­¢é»˜è®¤è¡Œä¸º*/
            e.stopPropagation();
            e.preventDefault();
        }

        /* ç»‘å®šäº‹ä»¶*/
        dom.addEventListener('touchstart', actBegin, false);
        parentDom.addEventListener('touchend', cancel, false);
        parentDom.addEventListener('touchcancel', cancel, false);

        this.stop = function () {
            dom.removeEventListener('touchstart', actBegin, false);
            parentDom.removeEventListener('touchend', cancel, false);
            parentDom.removeEventListener('touchcancel', cancel, false);
            parentDom.removeEventListener('touchmove', actMove, false);
        };
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    var dom = document.getElementById('j-rect');
    var action = new Drag(dom, dom.offsetParent);

    //action.stop();
    ```
    

### *åŸç”ŸJS*è§¦æ‘¸å±æ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶ï¼ˆæ¶ˆé™¤â€œå»¶æ—¶300æ¯«ç§’åæ‰è§¦å‘clickäº‹ä»¶â€ï¼Œä½¿ç‚¹å‡»äº‹ä»¶æå‰è§¦å‘ï¼‰
```javascript
/* ä¸è¦ç»‘å®šclickäº‹ä»¶ï¼Œç”¨touchstartå’Œtouchendæ¨¡æ‹Ÿï¼Œä»¥æ¶ˆé™¤â€œå»¶æ—¶300æ¯«ç§’åæ‰è§¦å‘â€çš„é—®é¢˜*/

var start_x, start_y;

document.getElementById('...').addEventListener('touchstart', function (e) {
    start_x = e.changedTouches[0].clientX;
    start_y = e.changedTouches[0].clientY;
}, false);

document.getElementById('...').addEventListener('touchend', function (e) {
    var end_x = e.changedTouches[0].clientX,
        end_y = e.changedTouches[0].clientY;

    if (Math.abs(end_x - start_x) > 5 || Math.abs(end_y - start_y) > 5) {
        /* è§¦å‘æ»‘åŠ¨äº‹ä»¶è¦åšçš„äº‹æƒ…ï¼ˆå¦‚ä»€ä¹ˆéƒ½ä¸åšï¼‰*/
    } else {
        /* è§¦å‘ç‚¹å‡»äº‹ä»¶è¦åšçš„äº‹æƒ…*/
    }
}, false);

/* è¿˜è¦å¤„ç†æµè§ˆå™¨é»˜è®¤ç‚¹å‡»äº‹ä»¶ï¼ˆå¦‚aæ ‡ç­¾ï¼‰*/
```

### *åŸç”ŸJS*åˆ¤æ–­äº‹ä»¶åœ¨æµè§ˆå™¨æ˜¯å¦å­˜åœ¨
```javascript
/**
 * åˆ¤æ–­DOMèŠ‚ç‚¹æ˜¯å¦æ”¯æŒæŸäº‹ä»¶
 * @param {String} eventName - äº‹ä»¶å
 * @param {Object} [element] - DOMçš„Documentå¯¹è±¡
 * @returns {Boolean} isSupported
 */
function isEventSupported(eventName, element) {
    var tagNames = {
            'select': 'input',
            'change': 'input',
            'submit': 'form',
            'reset': 'form',
            'error': 'img',
            'load': 'img',
            'abort': 'img'
        },
        isSupported;

    element = element || document.createElement(tagNames[eventName] || 'div');
    eventName = 'on' + eventName;

    isSupported = eventName in element;

    if (!isSupported) {
        if (!element.setAttribute) {    /* è‹¥èŠ‚ç‚¹æ²¡æœ‰setAttributeæ–¹æ³•ï¼Œåˆ™æ”¹ç”¨divèŠ‚ç‚¹è¿›è¡Œæµ‹è¯•*/
            element = document.createElement('div');
        }
        if (element.setAttribute && element.removeAttribute) {
            element.setAttribute(eventName, '');
            isSupported = typeof element[eventName] === 'function';

            if (element[eventName] !== undefined) { /* å†…å­˜å›æ”¶*/
                element[eventName] = undefined;
            }
            element.removeAttribute(eventName); /* å†…å­˜å›æ”¶*/
        }
    }

    element = null; /* å†…å­˜å›æ”¶*/

    return isSupported;
}
```

>æ›´å…¨é¢çš„æ€§èƒ½ç›‘å¬ï¼š[stats.js](https://github.com/mrdoob/stats.js/)ã€‚

### *åŸç”ŸJS*ç§‘å­¦è®¡æ•°æ³•è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ•°å­—
```javascript
function eToString(number) {
    number = number.toString(10);

    var regex = /^(\d)(?:\.(\d*))?[eE]([+-]?)(\d+)$/,   //ç§‘å­¦è®¡æ•°æ³•
        regexArr = regex.exec(number);

    if (regexArr === null) {

        return number;
    } else {
        var dotNumber = regexArr[2] ? regexArr[2] : '',
            dotLength = dotNumber.length, //å°æ•°ä½æ•°
            multiple = regexArr[4], //10è¿›åˆ¶ä½æ•°
            gap = Math.abs(multiple - dotLength),
            tempArr = [],
            i, result;

        if (regexArr[3] !== '-') {  /* å¤§äº1*/
            if (multiple >= dotLength) {    /* æ²¡æœ‰å°æ•°*/
                for (i = 0; i < gap; i++) {
                    tempArr.push('0');
                }

                result = regexArr[1] + dotNumber + tempArr.join('');
            } else {  /* æœ‰å°æ•°*/
                result = regexArr[1] + dotNumber.substr(0, multiple) + '.' + dotNumber.substr(multiple);
            }
        } else { /* å°äº1*/
            if (multiple === '0') {
                result = regexArr[1] + dotNumber;
            } else {
                for (i = 0; i < multiple - 1; i++) {
                    tempArr.push('0');
                }

                result = '0.' + tempArr.join('') + regexArr[1] + dotNumber;
            }
        }
    }

    return result;
}
```

### *åŸç”ŸJS*ç”¨æ•´æ•°è¿›è¡Œå°æ•°çš„å››åˆ™è¿ç®—ï¼ˆé¿å…æµ®ç‚¹æ•°è¿ç®—è¯¯å·®ï¼‰
```javascript
var fourOperations = {
    add: function (arg1, arg2) {    /* åŠ */
        var int1 = parseInt(arg1.toString().replace('.', ''), 10),
            int2 = parseInt(arg2.toString().replace('.', ''), 10),
            dotLength1, dotLength2, gap, gapMultiple, multiple;

        try {
            dotLength1 = arg1.toString().split('.')[1].length;
        } catch (e) {
            dotLength1 = 0;
        }
        try {
            dotLength2 = arg2.toString().split('.')[1].length;
        } catch (e) {
            dotLength2 = 0;
        }

        gap = Math.abs(dotLength1 - dotLength2);

        if (gap > 0) {
            gapMultiple = Math.pow(10, gap);

            if (dotLength1 < dotLength2) {
                int1 = int1 * gapMultiple;
            } else {
                int2 = int2 * gapMultiple;
            }
        }

        multiple = Math.pow(10, Math.max(dotLength1, dotLength2));

        return (int1 + int2) / multiple;
    },
    sub: function (arg1, arg2) {    /* å‡*/

        return this.add(arg1, -arg2);
    },
    mul: function (arg1, arg2) {    /* ä¹˜*/
        var multiple;

        try {
            multiple = arg1.toString().split('.')[1].length;
        } catch (e) {
            multiple = 0;
        }
        try {
            multiple = multiple + arg2.toString().split('.')[1].length;
        } catch (e) {

        }

        return parseInt(arg1.toString().replace('.', ''), 10) * parseInt(arg2.toString().replace('.', ''), 10) / Math.pow(10, multiple);
    },
    div: function (arg1, arg2) {    /* é™¤*/
        var dotLength1, dotLength2;

        try {
            dotLength1 = arg1.toString().split('.')[1].length;
        } catch (e) {
            dotLength1 = 0;
        }
        try {
            dotLength2 = arg2.toString().split('.')[1].length;
        } catch (e) {
            dotLength2 = 0;
        }

        return parseInt(arg1.toString().replace('.', ''), 10) / parseInt(arg2.toString().replace('.', ''), 10) * Math.pow(10, dotLength2 - dotLength1);
    }
};
```
>ç±»ä¼¼[number-precision](https://github.com/nefe/number-precision)ã€‚

### *åŸç”ŸJS*å¤§æ•°åŠ å‡æ³•ï¼ˆä¸è€ƒè™‘å°æ•°å’Œè´Ÿæ•°ï¼‰
```javascript
var overRangeOperations = {
    add: function (arg1, arg2) {    /* åŠ */
        /* éœ€è¦æŠŠç§‘å­¦è®¡æ•°æ³•è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ•°å­—*/
        arg1 = arg1.toString(10).split('');
        arg2 = arg2.toString(10).split('');

        var carry = 0,  //è¿›ä½
            result = [],
            temp;

        while (arg1.length || arg2.length || carry) {
            temp = parseInt(arg1.pop() || 0, 10) + parseInt(arg2.pop() || 0, 10) + carry;
            result.unshift(temp % 10);
            carry = Math.floor(temp / 10);
        }

        return result.join('');
    },

    sub: function (arg1, arg2) {    /* å‡*/
        /* éœ€è¦æŠŠç§‘å­¦è®¡æ•°æ³•è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„æ•°å­—*/
        arg1 = arg1.toString(10).split('');
        arg2 = arg2.toString(10).split('');

        var isArg2Bigger, // æ ‡è®°arg2æ˜¯å¦å¤§äºarg1
            result = [],
            i, len, temp;

        (function () {  /* ç¡®ä¿å¤§æ•°å‡å°æ•°*/
            isArg2Bigger = arg1.length < arg2.length;

            if (arg1.length === arg2.length) {
                for (i = 0, len = arg1.length; i < len; i++) {
                    if (arg1[i] === arg2[i]) {
                        continue;
                    }

                    isArg2Bigger = arg1[i] < arg2[i];

                    break;
                }
            }

            if (isArg2Bigger) {
                temp = arg1;
                arg1 = arg2;
                arg2 = temp;
            }
        }());

        while (arg1.length) {
            temp = parseInt(arg1.pop(), 10) - parseInt(arg2.pop() || 0, 10);

            if (temp >= 0) {
                result.unshift(temp);
            } else {
                result.unshift(temp + 10);

                arg1[arg1.length - 1] -= 1; //ç”±äºarg1ä¸€å®šå¤§äºç­‰äºarg2ï¼Œæ‰€ä»¥ä¸å­˜åœ¨arg1[i-1]ä¸ºundefinedçš„æƒ…å†µ
            }
        }

        result = result.join('').replace(/^0*/, '');    //å»æ‰å‰é¢çš„0

        if (result === '') {
            result = 0;
        } else {
            result = (isArg2Bigger ? '-' : '') + result;
        }

        return result;
    }
};
```

### *åŸç”ŸJS*ä¸åŒè¿›åˆ¶æ•°è½¬æ¢
```javascript
/**
 * ä¸åŒè¿›åˆ¶ï¼ˆ2è‡³36è¿›åˆ¶ï¼‰æ¢ç®—ï¼ˆ10ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—+26ä¸ªå­—æ¯ï¼‰
 * @param {String} operand - è½¬æ¢æ•°ï¼ˆäºŒè¿›åˆ¶ä»…ä½¿ç”¨0~1ã€å…«è¿›åˆ¶ä»…ä½¿ç”¨0~7ã€åè¿›åˆ¶ä»…ä½¿ç”¨0~9ã€åå…­è¿›åˆ¶ä»…ä½¿ç”¨0~9å’Œa~fï¼Œç­‰ï¼‰
 * @param {Number} fromRadix - è½¬æ¢æ•°çš„è¿›åˆ¶æ•°ï¼ˆ2~36ï¼‰
 * @param {Number} toRadix - ç»“æœçš„è¿›åˆ¶æ•°
 * @returns {String|Boolean|Number} - è½¬æ¢åçš„æ•°å€¼ï¼›è¿›åˆ¶æ•°ä¸åœ¨2~36ï¼šfalseï¼›æ“ä½œæ•°ä¸è¿›åˆ¶æ•°ä¸åŒ¹é…ï¼šNaN
 */
function numConvert(operand, fromRadix, toRadix) {
    var myself = arguments.callee;

    if (typeof myself.toDecimal !== 'function' || typeof myself.fromDecimal !== 'function') {
        myself.toDecimal = function (str, radix) {  /* å…¶ä»–è¿›åˆ¶è½¬åŒ–ä¸ºåè¿›åˆ¶*/

            return parseInt(str, radix);
        };

        myself.fromDecimal = function (num, radix) {    /* åè¿›åˆ¶è½¬åŒ–ä¸ºå…¶ä»–è¿›åˆ¶*/

            return num.toString(radix);
        };
    }

    if (fromRadix > 36 || fromRadix < 2 || toRadix > 36 || toRadix < 2) {    /* ä»…æ”¯æŒ2è‡³36è¿›åˆ¶*/

        console.log('è¿›åˆ¶æ•°åªèƒ½åœ¨2è‡³36ä¹‹é—´');

        return false;
    } else {

        if (fromRadix === 10) {
            operand = parseInt(operand, 10);
        } else {
            operand = myself.toDecimal(operand, fromRadix);
        }

        return myself.fromDecimal(operand, toRadix);
    }
}
```

### *åŸç”ŸJS*é€‰å–èŒƒå›´å†…éšæœºå€¼
>æ³¨æ„ï¼š
>
>1. æ£€æŸ¥ä¸åŒè¯­è¨€åŸå§‹è¿”å›çš„éšæœºå€¼ä¸¤è¾¹ç«¯ç‚¹å¼€é—­æƒ…å†µâ€”â€”ä¸åŒçš„å¼€é—­åŒºé—´å½±å“æœ€ç»ˆç®—æ³•ã€‚
>2. è·å–åˆ°çš„æ¯ä¸ªæ•´æ•°çš„æ¦‚ç‡æ˜¯å¦å‡ç­‰â€”â€”ç”¨å‘ä¸‹å–æ•´ä»£æ›¿å››èˆäº”å…¥å¯ä»¥ä½¿æ¦‚ç‡å‡ç­‰ã€‚

```javascript
/**
 * é€‰å–èŒƒå›´å†…éšæœºå€¼
 * @param {Number} min - ä¸‹é™ï¼ˆæˆ–ä¸Šé™ï¼‰
 * @param {Number} max - ä¸Šé™ï¼ˆæˆ–ä¸‹é™ï¼‰
 * @returns {Number} - ä¸Šä¸‹é™åŒºé—´å†…çš„éšæœºå€¼
 */
function randomFrom(min, max) {
    var temp;

    if (min > max) {
        temp = min;
        min = max;
        max = temp;
    }

    return Math.floor(Math.random() * (max - min + 1) + min);
}
```
>`Math.random()`è¿”å›`[0,1)`ã€‚å‡è®¾è¿”å›çš„å€¼çš„å¼€é—­åŒºé—´æ”¹å˜ï¼š
>
>1. å¦‚æœè¿”å›çš„æ˜¯ï¼š`(0,1)`ï¼Œåˆ™è¿”å›`Math.floor(Math.random() * (max - min + 2) + min - 1);`ã€‚
>2. å¦‚æœè¿”å›çš„æ˜¯ï¼š`(0,1]`ï¼Œåˆ™è¿”å›`Math.floor(Math.random() * (max - min + 1) + min - 1);`ã€‚
>3. å¦‚æœè¿”å›çš„æ˜¯ï¼š`[0,1]`ï¼Œåˆ™è¿”å›`Math.floor(Math.random() * (max - min) + min);`ã€‚

### *åŸç”ŸJS*è½¬åŒ–ä¸ºUnicodeã€åè½¬å­—ç¬¦ä¸²
```javascript
const hanldeWords = {

  // è½¬åŒ–ä¸ºUnicode
  toUnicode(words) {
    const arr = [];

    for (let i = 0; i < words.length; i++) {
      const unicode = words.charCodeAt(i).toString(16);
      arr[i] = '\\u' + '0'.repeat(4 - unicode.length) + unicode; // å•ä¸ªUnicodeï¼š\u+4ä½16è¿›åˆ¶æ•°ï¼›ä¸€ä¸ªå­—å¯èƒ½ä¸æ­¢ä¸€ä¸ªUnicodeï¼Œå¦‚ğŸ’©
    }

    return arr.join('');
  },

  // åè½¬å­—ç¬¦ä¸²
  reverseWords(words) {
    return Array.from(words).reverse().join('');
  }
};


/* ä½¿ç”¨æµ‹è¯•*/
console.log(hanldeWords.toUnicode('ğŸ’©Â©'));
console.log(hanldeWords.reverseWords('ğŸ’©Â©'));
```

### *åŸç”ŸJS*äº§ç”Ÿéšæœºæ•°
```javascript
/**
 * éšæœºæ•°äº§ç”Ÿ
 * @param {Number} length - éšæœºæ•°é•¿åº¦
 * @param {String} [charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'] - éšæœºæ•°çš„å­—ç¬¦
 * @returns {String} - éšæœºæ•°
 */
function random(length, charset) {
    charset = charset || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    return Array.apply(null, new Array(length)).map(function () {

        return charset.charAt(Math.floor(Math.random() * charset.length));
    }).join('');
}
```

### *åŸç”ŸJS*æ¯”è¾ƒç‰ˆæœ¬å·å¤§å°ï¼ˆçº¯æ•°å­—ï¼‰
```javascript
/**
 * æ¯”è¾ƒç‰ˆæœ¬å·å¤§å°ï¼ˆçº¯æ•°å­—ï¼‰
 * @param {Number|String} version - æ¯”è¾ƒæ•°1
 * @param {Number|String} base - æ¯”è¾ƒæ•°2
 * @param {String} [separator = '.'] - ç‰ˆæœ¬åˆ†éš”ç¬¦
 * @returns {String} flag - '=' æˆ– '>' æˆ– '<'
 */
function versionCompare(version, base, separator) {
    separator = separator || '.';

    var arr1 = version.toString().split(separator),
        arr2 = base.toString().split(separator),
        length = arr1.length > arr2.length ? arr1.length : arr2.length,
        flag = '=',
        i;

    for (i = 0; i < length; i++) {
        arr1[i] = arr1[i] || '0';
        arr2[i] = arr2[i] || '0';

        if (arr1[i] !== arr2[i]) {  /* ä¸¤å€¼ä¸åŒ*/
            flag = parseInt(arr1[i], 10) < parseInt(arr2[i], 10) ? '<' : '>';

            break;
        }
    }

    return flag;
}


/* ä½¿ç”¨æµ‹è¯•*/
console.log(versionCompare('1.1.10', '1.2'));
```

### *åŸç”ŸJS*åˆ¤æ–­æ£€ç´¢å†…å®¹æ˜¯å¦åœ¨è¢«æ£€ç´¢å†…å®¹çš„åˆ†éš”ç¬¦é—´
```javascript
/**
 * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ä»¥separatoråˆ†å‰²çš„strå½“ä¸­
 * @param {Number|String} key - æ£€ç´¢å†…å®¹
 * @param {Number|String} str - è¢«æ£€ç´¢å†…å®¹
 * @param {String} [separator = '|'] - strçš„åˆ†éš”ç¬¦
 * @returns {Boolean} flag
 */
function isKeyInStr(key, str, separator) {
    separator = separator || '|';

    var flag = false,
        strArr, i;

    key = key.toString();
    str = str.toString();

    strArr = str.split(separator);

    for (i = 0; i < strArr.length; i++) {
        if (key === strArr[i]) {
            flag = true;
            
            break;
        }
    }

    return flag;
}
```

### *åŸç”ŸJS*æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
```javascript
var format = {
  fileSize: function (bytes) {    /* æ ¼å¼åŒ–æ–‡ä»¶å¤§å°*/
    if (bytes === 0) {

      return '0';
    }
    var rate = 1024,
      units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
      exponent = Math.floor(Math.log(bytes) / Math.log(rate));

    return (bytes / Math.pow(rate, exponent)).toPrecision(3) + units[exponent];
  }
};


/* ä½¿ç”¨æµ‹è¯•*/
var a = format.fileSize(æ•°å­—);
```

### *åŸç”ŸJS*å•è¯é¦–å­—æ¯å¤§å†™
```javascript
function upperCaseWord(str) {

    return str.replace(/\b[a-zA-Z]/g, function (match) {

        return match.toUpperCase();
    });
}
```

### *åŸç”ŸJS*å®ç°ç±»ä¼¼jQueryçš„`$('html,body').animate({'scrollLeft': åƒç´ , 'scrollTop': åƒç´ }, æ¯«ç§’);`
```javascript
/**
 * æ»šåŠ¨åˆ°xã€yè½´æŒ‡å®šä½ç½®
 * @param {Number} endX - åˆ°è¾¾xè½´åƒç´ 
 * @param {Number} endY - åˆ°è¾¾yè½´åƒç´ 
 * @param {Number} time - æ‰€ç”¨æ¯«ç§’
 */
function animateTo(endX, endY, time) {
    var scrollFromX = document.body.scrollLeft || document.documentElement.scrollLeft,
        scrollFromY = document.body.scrollTop || document.documentElement.scrollTop,
        scrollToX = endX > document.documentElement.scrollWidth ? document.documentElement.scrollWidth : endX,
        scrollToY = endY > document.documentElement.scrollHeight ? document.documentElement.scrollHeight : endY,
        i = 0,
        runEvery = 5,
        myself = arguments.callee;

    time /= runEvery;

    clearInterval(myself.setIntervalId);

    myself.setIntervalId = setInterval(function () {
        i += 1;

        window.scrollTo((scrollToX - scrollFromX) / time * i + scrollFromX, (scrollToY - scrollFromY) / time * i + scrollFromY);

        if (i >= time) {
            clearInterval(myself.setIntervalId);
        }
    }, runEvery);
}
```
>ä½¿ç”¨[velocityåŠ¨ç”»åº“](https://github.com/julianshapiro/velocity)ï¼ˆ[ä¸­æ–‡æ–‡æ¡£](http://www.mrfront.com/docs/velocity.js/)ï¼‰åšæ‰€æœ‰çš„åŠ¨ç”»ï¼ˆåŒ…æ‹¬JSå’ŒCSSï¼‰æ‰æ˜¯æœ€ç®€å•ä¸”æ€§èƒ½æœ€ä½³çš„é€‰æ‹©ã€‚
>å¦‚æ»šåŠ¨åˆ°æŸä½ç½®ï¼š`$('html').velocity('scroll', {offset: yè½´åƒç´ , duration: æ¯«ç§’});`ã€‚

### *åŸç”ŸJS*ç”¨è¯·æ±‚å›¾ç‰‡ä½œlogç»Ÿè®¡
```javascript
var sendLog = (function () {
    if (typeof Date.now !== 'function') {
        Date.now = function () {
            return new Date().getTime();
        };
    }

    var _unique = (function () {    /* äº§ç”Ÿå”¯ä¸€æ ‡è¯†*/
        var time = Date.now() + '_',
            i = 0;

        return function () {
            i += 1;

            return time + i - 1;
        }
    }());

    var run = function (url) {
        var data = window['imgLogData'] || (window['imgLogData'] = {}),
            img = new Image(),
            uid = _unique();

        data[uid] = img;    //é˜²æ­¢imgè¢«åƒåœ¾å¤„ç†

        img.onload = img.onerror = function () {    /* æˆåŠŸæˆ–å¤±è´¥åé”€æ¯å¯¹è±¡*/
            img.onload = img.onerror = null;
            img = null;
            delete data[uid];
        };

        img.src = url + '&_cache=' + uid;   //å‘é€ç»Ÿè®¡å†…å®¹
    };

    return run;
}());


/* ä½¿ç”¨æµ‹è¯•*/
sendLog('ç»Ÿè®¡url');
```

### *åŸç”ŸJS*åˆ¤æ–­æ˜¯å¦ä¸º`Node`ã€æ˜¯å¦ä¸º`Element`
```javascript
// åˆ¤æ–­æ˜¯å¦ä¸ºNode
function isNode(o) {
  return typeof Node === 'object' ? o instanceof Node : !!o && typeof o === 'object' && typeof o.nodeType === 'number' && typeof o.nodeName === 'string';
}

// åˆ¤æ–­æ˜¯å¦ä¸ºElement
function isElement(o) {
  return typeof HTMLElement === 'object' ? o instanceof HTMLElement : !!o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string';
}
```

### *åŸç”ŸJS*åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º
```javascript
function isObjEmpty(obj) {
    var i;

    if (obj !== Object(obj)) {  /* å‚æ•°ä¸æ˜¯å¯¹è±¡*/
        throw new TypeError('å‚æ•°ä¸æ˜¯å¯¹è±¡');
    } else if (typeof Object.keys === 'function') { /* ie9+*/

        return Object.keys(obj).length === 0;
    } else {
        for (i in obj) {
            if (obj.hasOwnProperty(i)) {

                return false;
            }
        }

        return true;
    }
}
```

### *åŸç”ŸJS*è¾“å…¥æ¡†å…‰æ ‡ä½ç½®çš„è·å–å’Œè®¾ç½®
```javascript
var cursorPosition = {

    /**
     * è·å–å…‰æ ‡ä½ç½®å’Œé€‰ä¸­é•¿åº¦
     * @param {Object} dom - æ ‡ç­¾inputæˆ–textareaçš„DOMå¯¹è±¡
     * @returns {Object} - {å…‰æ ‡èµ·å§‹ä½ç½®,é€‰ä¸­é•¿åº¦}
     */
    get: function (dom) {
        var start = 0, //å…‰æ ‡èµ·å§‹ä½ç½®
            selLen = 0, //å…‰æ ‡é€‰ä¸­é•¿åº¦
            sel, ieSel;

        if ('selectionStart' in dom) {
            start = dom.selectionStart;
            selLen = dom.selectionEnd - start;
        } else if (document.selection) {    /* ie*/
            sel = document.selection.createRange();
            selLen = sel.text.length;

            if (dom.nodeName.toLowerCase() === 'textarea') {
                ieSel = document.body.createTextRange();
                ieSel.moveToElementText(dom);
            } else {
                ieSel = dom.createTextRange();
            }

            ieSel.setEndPoint('EndToEnd', sel);
            start = ieSel.text.length - selLen;
        }

        return {start: start, select: selLen};
    },

    /**
     * è®¾ç½®å…‰æ ‡èµ·å§‹ä½ç½®å’Œé€‰ä¸­é•¿åº¦
     * @param {Object} dom - æ ‡ç­¾inputæˆ–textareaçš„DOMå¯¹è±¡
     * @param {Number} start - å…‰æ ‡èµ·å§‹ä½ç½®
     * @param {Number} len - é€‰ä¸­é•¿åº¦
     * @returns {Number} end - ç»“æŸä½ç½®ï¼ˆstart+lenï¼‰
     */
    set: function (dom, start, len) {
        var valueLen = dom.value.length,
            end, ieSel;

        /* åˆå§‹åŒ–start*/
        start = parseInt(start, 10);
        if (!start) {
            start = 0;
        } else if (start > valueLen) {
            start = valueLen;
        }

        /* åˆå§‹åŒ–len*/
        len = parseInt(len, 10);
        if (!len) {
            len = 0;
        }

        /* åˆå§‹åŒ–end*/
        end = start + len;
        if (end > valueLen) {
            end = valueLen;
        }

        if (valueLen !== 0) {
            if (dom.setSelectionRange) {
                dom.setSelectionRange(start, end);
                dom.focus();
            } else {    /* ie*/
                ieSel = dom.createTextRange();
                ieSel.moveStart('character', -valueLen);
                ieSel.moveEnd('character', -valueLen);
                ieSel.moveStart('character', start);
                ieSel.moveEnd('character', len);
                ieSel.select();
            }
        } else {
            if (dom.setSelectionRange) {
                dom.focus();
            } else {    /* ie*/
                ieSel = dom.createTextRange();
                ieSel.select();
            }
        }

        return end;
    }
};


/* ä½¿ç”¨æµ‹è¯•*/
$(è¾“å…¥æ¡†é€‰æ‹©å™¨).on('mouseup keyup', function () {
    console.log(cursorPosition.get(this));
});

console.log(cursorPosition.set(è¾“å…¥æ¡†dom, èµ·å§‹ä½ç½®, é€‰ä¸­é•¿åº¦));
```
[JSFiddle Demo](https://jsfiddle.net/realgeoffrey/L3k46dy3/)

### *åŸç”ŸJS*é˜»æ­¢åµŒå…¥æ»šåŠ¨æ¡å†’æ³¡â€œæ©¡çš®ç­‹æ•ˆæœâ€ï¼ˆiOSï¼‰
```html
<style>
    .bounce {
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;

        height: å›ºå®šé«˜åº¦;
    }
</style>

<div class="bounce" id="j-bounce">
    a<br>
    b<br>
    c<br>
    d<br>
    e<br>
    f<br>
    g<br>
</div>

<script>
    var ScrollBounce = function (dom) {
        var _bounce = function () {
            var startTopScroll = dom.scrollTop, //æ»šåŠ¨é«˜åº¦
                domHeight = dom.offsetHeight, //å æ®é«˜åº¦
                contentHeight = dom.scrollHeight; //å†…å®¹é«˜åº¦ï¼ˆå æ®é«˜åº¦+å¯æ»šåŠ¨æœ€å¤§é«˜åº¦

            /*
             * åœ¨è§¦æ‘¸å¼€å§‹æ—¶ï¼Œå¦‚æœå‘ç°æ»šåŠ¨åŒºåŸŸå·²ç»å¤„äºæé™çŠ¶æ€æ—¶ï¼Œå°±æ‰‹å·¥è®¾ç½® scrollTop çš„å€¼ï¼Œ
             * å°†æ»šåŠ¨å†…å®¹å‘è¾¹ç¼˜æ–¹å‘åç§» 1pxï¼ˆè¿™å®é™…ä¸Šæ”¹å˜äº†æ»šåŠ¨åŒºåŸŸçš„æé™çŠ¶æ€ï¼‰ï¼Œ
             * ä»è€Œè¯±ä½¿æµè§ˆå™¨å¯¹æ»šåŠ¨åŒºå—ä½¿ç”¨æ©¡çš®ç­‹æ•ˆæœï¼Œè€Œä¸ä¼šæŠŠè§¦æ‘¸äº‹ä»¶å‘ä¸Šä¼ æ’­åˆ° DOM æ ‘ï¼ˆå¼•èµ·æ•´é¡µæ»šåŠ¨ï¼‰ã€‚
             */
            if (startTopScroll <= 0) {
                dom.scrollTop = 1;
            } else if (startTopScroll + domHeight >= contentHeight) {
                dom.scrollTop = contentHeight - domHeight - 1;
            }
        };

        this.stop = function () {};

        if ((/iphone|ipad|ipod/i).test(navigator.userAgent)) {  /* ä»…iOSè®¾å¤‡æ”¯æŒâ€œæ©¡çš®ç­‹æ•ˆæœâ€*/
            dom.addEventListener('touchstart', _bounce, false);

            this.stop = function () {
                dom.removeEventListener('touchstart', _bounce, false);
            };
        }
    };


    /* ä½¿ç”¨æµ‹è¯•*/
    var a = new ScrollBounce(document.getElementById('j-bounce'));

    //a.stop();
</script>
```
[JSFiddle Demo](https://jsfiddle.net/realgeoffrey/hbadqyew/)
>å‚è€ƒ[ScrollFix](https://github.com/joelambert/ScrollFix)ã€‚

### *åŸç”ŸJS*è·å–æ»šåŠ¨è½´å®½åº¦ï¼ˆæˆ–é«˜åº¦ï¼‰
```javascript
function getScrollBarWidth() {
    if (typeof arguments.callee.barWidth !== 'undefined') {

        return arguments.callee.barWidth;
    }

    var dom = document.createElement('div');

    dom.style.cssText = 'overflow: scroll; width: 100px; height: 100px;';

    document.body.appendChild(dom);

    arguments.callee.barWidth = dom.offsetWidth - dom.clientWidth;

    document.body.removeChild(dom);

    return arguments.callee.barWidth;
}
```

### *åŸç”ŸJS*é˜²æŠ–å‡½æ•°
```javascript
/**
 * å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œé—´éš”æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äºwaitï¼Œfuncæ‰ä¼šæ‰§è¡Œ
 * @param {Function} func - ä¼ å…¥å‡½æ•°
 * @param {Number} wait - å‡½æ•°è§¦å‘çš„æœ€å°é—´éš”
 * @param {Boolean} [immediate] - è®¾ç½®ä¸ºtureæ—¶ï¼Œè°ƒç”¨è§¦å‘äºå¼€å§‹è¾¹ç•Œè€Œä¸æ˜¯ç»“æŸè¾¹ç•Œ
 * @returns {Function} - è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°
 */
function debounce(func, wait, immediate) {
    if (typeof Date.now !== 'function') {
        Date.now = function () {
            return new Date().getTime();
        };
    }

    var timeout, args, context, timestamp, result;

    var later = function () {
        //æ®ä¸Šä¸€æ¬¡è§¦å‘æ—¶é—´é—´éš”
        var last = Date.now() - timestamp;

        //ä¸Šæ¬¡è¢«åŒ…è£…å‡½æ•°è¢«è°ƒç”¨æ—¶é—´é—´éš”lastå°äºè®¾å®šæ—¶é—´é—´éš”wait
        if (last < wait && last >= 0) {
            timeout = setTimeout(later, wait - last);
        } else {
            timeout = null;

            //å¦‚æœè®¾å®šä¸ºimmediate===trueï¼Œå› ä¸ºå¼€å§‹è¾¹ç•Œå·²ç»è°ƒç”¨è¿‡äº†æ­¤å¤„æ— éœ€è°ƒç”¨
            if (!immediate) {
                result = func.apply(context, args);

                if (!timeout) {
                    context = args = null;
                }
            }
        }
    };

    return function () {
        context = this;
        args = arguments;
        timestamp = Date.now();

        var callNow = immediate && !timeout;

        if (!timeout) {
            timeout = setTimeout(later, wait);
        }
        if (callNow) {
            result = func.apply(context, args);
            context = args = null;
        }

        return result;
    };
}


/* ä½¿ç”¨æµ‹è¯•*/
var a = debounce(function () {
    console.log(1);
}, 1000);

$(window).on('scroll', a);
```
>æ¥è‡ª[underscore](https://github.com/jashkenas/underscore)ã€‚

### *åŸç”ŸJS*èŠ‚æµå‡½æ•°
```javascript
/**
 * å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œfuncåœ¨waitæ—¶é—´å†…ï¼Œæ‰§è¡Œæ¬¡æ•°ä¸å¾—é«˜äº1æ¬¡
 * @param {Function} func - ä¼ å…¥å‡½æ•°
 * @param {Number} wait - å‡½æ•°è§¦å‘çš„æœ€å°é—´éš”
 * @param {Object} [options] - å¦‚æœæƒ³å¿½ç•¥å¼€å§‹è¾¹ç•Œä¸Šçš„è°ƒç”¨ï¼Œä¼ å…¥{leading: false}ï¼›å¦‚æœæƒ³å¿½ç•¥ç»“å°¾è¾¹ç•Œä¸Šçš„è°ƒç”¨ï¼Œä¼ å…¥{trailing: false}
 * @returns {Function} - è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°
 */
function throttle(func, wait, options) {
    if (typeof Date.now !== 'function') {
        Date.now = function () {
            return new Date().getTime();
        };
    }

    var context, args, result;
    var timeout = null;
    var previous = 0;   //ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ç‚¹

    if (!options) {
        options = {};
    }

    //å»¶è¿Ÿæ‰§è¡Œå‡½æ•°
    var later = function () {
        //è‹¥è®¾å®šäº†å¼€å§‹è¾¹ç•Œä¸æ‰§è¡Œé€‰é¡¹ï¼Œä¸Šæ¬¡æ‰§è¡Œæ—¶é—´å§‹ç»ˆä¸º0
        previous = options.leading === false ? 0 : Date.now();
        timeout = null;
        result = func.apply(context, args);
        if (!timeout) {
            context = args = null;
        }
    };

    return function () {
        var now = Date.now();

        //é¦–æ¬¡æ‰§è¡Œæ—¶ï¼Œå¦‚æœè®¾å®šäº†å¼€å§‹è¾¹ç•Œä¸æ‰§è¡Œé€‰é¡¹ï¼Œå°†ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´è®¾å®šä¸ºå½“å‰æ—¶é—´ã€‚
        if (!previous && options.leading === false) {
            previous = now;
        }

        //å»¶è¿Ÿæ‰§è¡Œæ—¶é—´é—´éš”
        var remaining = wait - (now - previous);

        context = this;

        args = arguments;

        //å»¶è¿Ÿæ—¶é—´é—´éš”remainingå°äºç­‰äº0ï¼Œè¡¨ç¤ºä¸Šæ¬¡æ‰§è¡Œè‡³æ­¤æ‰€é—´éš”æ—¶é—´å·²ç»è¶…è¿‡ä¸€ä¸ªæ—¶é—´çª—å£ || remainingå¤§äºæ—¶é—´çª—å£waitï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯ç³»ç»Ÿæ—¶é—´è¢«è°ƒæ•´è¿‡
        if (remaining <= 0 || remaining > wait) {
            if (timeout) {
                clearTimeout(timeout);
                timeout = null;
            }
            previous = now;
            result = func.apply(context, args);
            if (!timeout) {
                context = args = null;
            }
        } else if (!timeout && options.trailing !== false) { //å¦‚æœå»¶è¿Ÿæ‰§è¡Œä¸å­˜åœ¨ï¼Œä¸”æ²¡æœ‰è®¾å®šç»“å°¾è¾¹ç•Œä¸æ‰§è¡Œé€‰é¡¹
            timeout = setTimeout(later, remaining);
        }
        return result;
    };
}


/* ä½¿ç”¨æµ‹è¯•*/
var a = throttle(function () {
    console.log(1);
}, 1000);

$(window).on('scroll', a);
```
>æ¥è‡ª[underscore](https://github.com/jashkenas/underscore)ã€‚

### *åŸç”ŸJS*éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§
```javascript
function validateEmail(email) {

    return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
}
```
>æ¥è‡ª[stackoverflow:Validate email address in JavaScript?](http://stackoverflow.com/questions/46155/validate-email-address-in-javascript#answer-46181)ã€‚

ä¸å­˜åœ¨å¯ä»¥åˆ¤æ–­ä¸–ç•Œä»»ä½•ä¸€ä¸ªæœ‰æ•ˆé‚®ç®±çš„æ­£åˆ™ã€‚

### *åŸç”ŸJS*åˆ›å»ºå…¼å®¹çš„XHRå¯¹è±¡
```javascript
function createXHR() {
    if (typeof XMLHttpRequest !== 'undefined') {    //ie7+å’Œå…¶ä»–æµè§ˆå™¨

        return new XMLHttpRequest();
    } else if (typeof ActiveXObject !== 'undefined') {
        if (typeof arguments.callee.activeXString !== 'string') {
            var versions = ['MSXML2.XMLHttp.6.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp'],
                i, len;

            for (i = 0, len = versions.length; i < len; i++) {
                try {
                    new ActiveXObject(versions[i]);
                    arguments.callee.activeXString = versions[i];
                    break;
                } catch (e) {
                    //è·³è¿‡
                }
            }
        }

        return new ActiveXObject(arguments.callee.activeXString);   //è¿”å›ActiveXObjectå¯¹è±¡
    } else {//å…¨éƒ¨ä¸æ”¯æŒï¼ŒæŠ›å‡ºé”™è¯¯
        throw new Error('don\'t support XMLHttpRequest');
    }
}


/* ä½¿ç”¨æµ‹è¯•*/
var xhr = createXHR();

xhr.onreadystatechange = function () {  //æˆ–DOM2çº§ã€ieäº‹ä»¶ç»‘å®šæ–¹å¼
    console.log(xhr.getResponseHeader(å¤´), xhr.getAllResponseHeaders());

    if (xhr.readyState === 4) {
        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
            console.log(xhr.responseText);
        } else {
            console.log('è¯·æ±‚å¤±è´¥ï¼š' + xhr.status);
        }

        //xhr.abort();
        //xhr = null;
    }
};
xhr.open(è¯·æ±‚ç±»å‹, URL[, æ˜¯å¦å¼‚æ­¥[, ç”¨æˆ·å[, å¯†ç ]]]);
xhr.setRequestHeader(å¤´, å€¼);
xhr.send(null);
```

### *åŸç”ŸJS*åŠ¨æ€æ·»åŠ è„šæœ¬ã€æ ·å¼
1. åŠ¨æ€æ·»åŠ è„šæœ¬

    1. å¼‚æ­¥

        1. ç›´æ¥`document.write`

            ```javascript
            document.write('<script src="JSæ–‡ä»¶åœ°å€"><\/script>');
            ```
        2. åŠ¨æ€æ”¹å˜å·²å­˜åœ¨çš„`<script>`çš„`src`å±æ€§

            ```html
            <script type="text/javascript" id="èŠ‚ç‚¹id"></script>

            <script>
                document.getElementById('èŠ‚ç‚¹id').src = 'JSæ–‡ä»¶åœ°å€';
            </script>
            ```
        3. åŠ¨æ€åˆ›å»º`<script>`

            ```javascript
            var newScript = document.createElement('script'),
                appendPlace = document.body || document.getElementsByTagName('head')[0];

            newScript.type = 'text/javascript';

            newScript.src = 'JSæ–‡ä»¶åœ°å€';

            appendPlace.appendChild(newScript);
            ```

        >å¼‚æ­¥åŠ è½½ç¬¬ä¸‰æ–¹èµ„æºå¯åœ¨`<script>`æ·»åŠ `defer`æˆ–`async`å±æ€§ã€‚
    2. åŒæ­¥

        1. æ·»åŠ JSä»£ç 

            ```javascript
            var newScript = document.createElement('script'),
                appendPlace = document.body || document.getElementsByTagName('head')[0];

            newScript.type = 'text/javascript';

            try {
                newScript.appendChild(document.createTextNode('JSä»£ç '));
            }
            catch (e) {
                newScript.text = 'JSä»£ç ';  //ie8-ï¼ŒSafariè€ç‰ˆæœ¬
            }

            appendPlace.appendChild(newScript);
            ```
        2. æ·»åŠ `<script>`

            ```javascript
            /**
             * åŒæ­¥åŠ è½½JSè„šæœ¬
             * @param {String} url - JSæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„
             * @returns {Boolean} - æ˜¯å¦åŠ è½½æˆåŠŸ
             */
            function syncLoadJS(url) {
                var xmlHttp,
                    appendPlace,
                    newScript;

                if (window.ActiveXObject) { /* ie*/
                    try {
                        xmlHttp = new ActiveXObject('Msxml2.XMLHTTP');
                    }
                    catch (e) {
                        xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');
                    }
                } else if (window.XMLHttpRequest) {
                    xmlHttp = new XMLHttpRequest();
                }

                xmlHttp.open('GET', url, false);    //é‡‡ç”¨åŒæ­¥åŠ è½½
                xmlHttp.send(null); //å‘é€åŒæ­¥è¯·æ±‚ï¼Œå¦‚æœæµè§ˆå™¨ä¸ºChromeæˆ–Operaï¼Œå¿…é¡»å‘å¸ƒåæ‰èƒ½è¿è¡Œï¼Œä¸ç„¶ä¼šæŠ¥é”™

                /* 4ä»£è¡¨æ•°æ®å‘é€å®Œæ¯•*/
                if (xmlHttp.readyState == 4) {
                    /* 0ä¸ºè®¿é—®çš„æœ¬åœ°ï¼Œ200åˆ°300ä»£è¡¨è®¿é—®æœåŠ¡å™¨æˆåŠŸï¼Œ304ä»£è¡¨æ²¡åšä¿®æ”¹è®¿é—®çš„æ˜¯ç¼“å­˜*/
                    if ((xmlHttp.status >= 200 && xmlHttp.status < 300) || xmlHttp.status == 0 || xmlHttp.status == 304) {
                        newScript = document.createElement('script');
                        appendPlace = document.body || document.getElementsByTagName('head')[0];

                        newScript.type = 'text/javascript';

                        try {
                            newScript.appendChild(document.createTextNode(xmlHttp.responseText));
                        }
                        catch (e) {
                            newScript.text = xmlHttp.responseText;
                        }

                        appendPlace.appendChild(newScript);

                        return true;
                    }
                    else {

                        return false;
                    }
                }
                else {

                    return false;
                }
            }
            ```
2. åŠ¨æ€æ·»åŠ æ ·å¼

    1. æ·»åŠ `<style>`

        ```javascript
        var newStyle = document.createElement('style');

        newStyle.type = 'text/css';

        try {
            newStyle.appendChild(document.createTextNode('CSSä»£ç '));
        }
        catch (e) {
            newStyle.styleSheet.cssText = 'CSSä»£ç ';  //ie
        }

        document.getElementsByTagName('head')[0].appendChild(newStyle);
        ```
    2. æ·»åŠ `<link>`

        >å¿…é¡»å°†`<link>`æ·»åŠ åˆ°`<head>`ï¼Œæ‰èƒ½ä¿è¯åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­çš„è¡Œä¸ºä¸€è‡´ã€‚

        ```javascript
        var newLink = document.createElement('link');

        newLink.rel = 'styleSheet';
        newLink.type = 'text/css';

        newLink.href = 'CSSæ–‡ä»¶åœ°å€';

        document.getElementsByTagName('head')[0].appendChild(newLink);
        ```
    3. æ·»åŠ å†…åµŒæ ·å¼

        ```javascript
        var oneDom = document.getElementById('èŠ‚ç‚¹id');

        oneDom.style.cssText += '; CSSä»£ç '
        ```

    >CSSä»£ç ï¼Œå¦‚ `div {background-color: yellow;}`ã€‚

### *åŸç”ŸJS*å±•ç¤ºé¡µé¢å¸§æ•°
```javascript
/**
 * å±•ç¤ºfps
 * @constructor
 * @param {Object} [dom] - å±•ç¤ºçš„DOM
 */
function ShowFPS(dom) {
    var self = this;

    var fps = 0,
        before = Date.now(),
        now,
        show = function (fps) {
            dom.innerHTML = 'fps: ' + fps;
        };

    if (!dom) {
        dom = document.createElement('span');
        dom.style.position = 'fixed';
        dom.style.top = '0';
        document.getElementsByTagName('body')[0].appendChild(dom);
    }

    self.id = requestAnimationFrame(function () {
        now = Date.now();

        if (now - before >= 1000) {
            before = now;
            show(fps);
            fps = 0;
        } else {
            fps += 1;
        }

        self.id = requestAnimationFrame(arguments.callee);
    });

    self.stop = function () {
        cancelAnimationFrame(self.id);
    };
}


/* ä½¿ç”¨æµ‹è¯•*/
var a = new ShowFPS();

//a.stop();
```

### *åŸç”ŸJS*è·å–æ˜Ÿåº§
```javascript
/**
 * è·å–æ˜Ÿåº§
 * @param {String|Number} birthday - å¹´æœˆæ—¥ï¼ˆ8ä½ï¼Œå¦‚'19900220'æˆ–19900220ï¼‰ æˆ– ç©ºå­—ç¬¦ä¸²
 * @returns {String} constellation - æ˜Ÿåº§ æˆ– ç©ºå­—ç¬¦ä¸²
 */
function getConstellation (birthday) {
  birthday = birthday.toString()

  var constellation = ''

  if (birthday && birthday.length === 8) {
    var month = birthday.slice(4, 6)
    var day = birthday.slice(6, 8)
    var conStr = 'é­”ç¾¯æ°´ç“¶åŒé±¼ç™½ç¾Šé‡‘ç‰›åŒå­å·¨èŸ¹ç‹®å­å¤„å¥³å¤©ç§¤å¤©èå°„æ‰‹é­”ç¾¯'
    var dayArr = [20, 19, 21, 20, 21, 22, 23, 23, 23, 24, 23, 22]

    constellation = conStr.substr(month * 2 - (day < dayArr[month - 1] ? 2 : 0), 2)

    if (constellation) {
      constellation += 'åº§'
    }
  }

  return constellation
}
```

### *åŸç”ŸJS*åˆ†å‰²æ•°ç»„
```javascript
/**
 * åˆ†å‰²æ•°ç»„ï¼Œå¹¶ä»¥åµŒå¥—æ•°ç»„å½¢å¼è¿”å›
 * @param {Array} arr - æ•°ç»„
 * @param {Number} [divisor = 1] - åˆ†å‰²é™¤æ•°
 * @returns {Array} newArr - æ¯”å¦‚è¿”å›ï¼š[[0, 1, 2], [3, 4, 5], [6]]
 */
function divideArr(arr, divisor) {
    divisor = divisor || 1;
    arr = arr.slice();  // æµ…å¤åˆ¶

    var newArr = [];    // æ•°ç»„ä¸­åµŒå¥—æ•°ç»„çš„å½¢å¼è¿”å›
    var tempArr = [];   // ä¸´æ—¶æ•°ç»„

    while (arr.length > 0) {
        for (var i = 0; i < divisor && arr.length > 0; i++) {
            tempArr.push(arr.shift());
        }
        newArr.push(tempArr);
        tempArr = [];
    }

    return newArr;
}
```

### *åŸç”ŸJS*åŠ å…¥æ”¶è—å¤¹
```javascript
function addFavorite(url, title) {  /* urlå¿…é¡»å¸¦æœ‰åè®®å¤´*/
    if (window.external && 'addFavorite' in window.external) {
        window.external.addFavorite(url, title);
    } else if (window.sidebar && window.sidebar.addPanel) {
        window.sidebar.addPanel(url, title);
    } else if (window.opera && window.print) {
        this.title = title;
        return true;
    } else {
        alert('åŠ å…¥æ”¶è—å¤±è´¥ï¼Œè¯·ä½¿ç”¨ ' + (navigator.userAgent.toLowerCase().indexOf('mac') !== -1 ? 'Command/Cmd' : 'Ctrl') + ' + D è¿›è¡Œæ·»åŠ ã€‚');
    }
}


/* ä½¿ç”¨æµ‹è¯•*/
addFavorite(window.location.href, 'æ”¶è—åå­—');
```

### *åŸç”ŸJS*ä»å­—ç¬¦ä¸²ä¸­è·å–ç»å¯¹è·¯å¾„
```javascript
function getAbsoluteUrl(url) {
    var domA;

    if (typeof url === 'undefined') {

        return document.location.href;
    } else {
        domA = document.createElement('a');
        domA.href = url;

        return domA.href;
    }
}
```

### *åŸç”ŸJS*ç”¨`setTimeout`æ¨¡æ‹Ÿ`setInterval`
```javascript
/**
 * ç”¨setTimeoutæ¨¡æ‹ŸsetInterval
 * @constructor
 * @param {Function} func - å¾ªç¯æ‰§è¡Œå‡½æ•°
 * @param {Number} millisecond - é—´éš”æ¯«ç§’
 */
function SetInterval(func, millisecond) {
    var _setIntervalId;

    if (typeof func === 'function') {
        _setIntervalId = setTimeout(function () {
            _setIntervalId = setTimeout(arguments.callee, millisecond);

            func();
        }, millisecond);
    }

    this.stop = function () {
        clearTimeout(_setIntervalId);
    };
}


/* ä½¿ç”¨æµ‹è¯•*/
var a = new SetInterval(function () {
    console.log(1);

    if (...) {
        a.stop();
    }
}, 1000);

//a.stop();
```

### *åŸç”ŸJS*`requestAnimationFrame`çš„é€’å½’
```javascript
/**
 * æ¯ä¸€å¸§éƒ½æ‰§è¡Œä¸€æ¬¡func
 * @constructor
 * @param {Function} func - æ‰§è¡Œçš„å‡½æ•°
 */
function RepeatRAF(func) {
    var _repeatRAFId;

    if (typeof func === 'function') {
        _repeatRAFId = requestAnimationFrame(function () {
            _repeatRAFId = requestAnimationFrame(arguments.callee);

            func();
        });
    }

    this.stop = function () {
        cancelAnimationFrame(_repeatRAFId);
    };
}


/* ä½¿ç”¨æµ‹è¯•*/
var a = new RepeatRAF(function () {
    console.log(1);

    if (...) {
        a.stop();
    }
});

//a.stop();
```

---
## Polyfill

### *åŸç”ŸJS*`requestAnimationFrame`å’Œ`cancelAnimationFrame`çš„Polyfill
```javascript
(function () {
    var lastTime = 0,
        vendors = ['ms', 'moz', 'webkit', 'o'],
        x;

    for (x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function (callback, element) {
            var currTime = new Date().getTime(),
                timeToCall = Math.max(0, 16 - (currTime - lastTime)),
                id = window.setTimeout(function () {
                    callback(currTime + timeToCall);
                }, timeToCall);

            lastTime = currTime + timeToCall;

            return id;
        };
    }

    if (!window.cancelAnimationFrame) {
        window.cancelAnimationFrame = function (id) {
            clearTimeout(id);
        };
    }
}());
```
>æ¥è‡ª[rAF.js](https://gist.github.com/paulirish/1579671)ã€‚

### *åŸç”ŸJS*`Date.now`çš„Polyfill
```javascript
if (typeof Date.now !== 'function') {
    Date.now = function () {
        return new Date().getTime();
    };
}
```
>`Date.now()`ç›¸å¯¹äº`new Date().getTime()`åŠå…¶ä»–æ–¹å¼ï¼Œå¯ä»¥é¿å…ç”Ÿæˆä¸å¿…è¦çš„`Date`å¯¹è±¡ï¼Œæ›´é«˜æ•ˆã€‚

### *åŸç”ŸJS*`Object.create`çš„Polyfill
```javascript
if (typeof Object.create !== 'function') {
    Object.create = (function () {
        function Temp() {}

        var hasOwn = Object.prototype.hasOwnProperty;

        return function (O) {
            if (typeof O != 'object') {
                throw TypeError('Object prototype may only be an Object or null');
            }

            Temp.prototype = O;
            var obj = new Temp();
            Temp.prototype = null; // ä¸è¦ä¿æŒä¸€ä¸ª O çš„æ‚æ•£å¼•ç”¨ï¼ˆa stray referenceï¼‰...

            if (arguments.length > 1) {
                var Properties = Object(arguments[1]);

                for (var prop in Properties) {
                    if (hasOwn.call(Properties, prop)) {
                        obj[prop] = Properties[prop];
                    }
                }
            }

            return obj;
        };
    })();
}
```
>æ¥è‡ª[MDN:Object.create](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill)ã€‚

### *åŸç”ŸJS*`Array.isArray`çš„Polyfill
```javascript
if (!Array.isArray) {
    Array.isArray = function (arg) {
        return Object.prototype.toString.call(arg) === '[object Array]';
    };
}
```
>æ¥è‡ª[MDN:Array.isArray](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#Polyfill)ã€‚

### *åŸç”ŸJS*`Array.prototype.map`çš„Polyfill
```javascript
if (!Array.prototype.map) {
    Array.prototype.map = function (callback, thisArg) {
        var T, A, k;

        if (this == null) {
            throw new TypeError(' this is null or not defined');
        }

        var O = Object(this);

        var len = O.length >>> 0;

        if (Object.prototype.toString.call(callback) != '[object Function]') {
            throw new TypeError(callback + ' is not a function');
        }

        if (thisArg) {
            T = thisArg;
        }

        A = new Array(len);

        k = 0;

        while (k < len) {
            var kValue, mappedValue;

            if (k in O) {

                kValue = O[k];

                mappedValue = callback.call(T, kValue, k, O);

                A[k] = mappedValue;
            }

            k += 1;
        }

        return A;
    };
}
```
>æ¥è‡ª[MDN:Array.prototype.map](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Compatibility)ã€‚

### *åŸç”ŸJS*`Function.prototype.bind`çš„Polyfill
```javascript
if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
        if (typeof this !== 'function') {
            throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function () {
            },
            fBound = function () {
                return fToBind.apply(this instanceof fNOP
                        ? this
                        : oThis || this,
                    aArgs.concat(Array.prototype.slice.call(arguments)));
            };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();

        return fBound;
    };
}
```
>æ¥è‡ª[MDN:Function.prototype.bind](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)ã€‚

### *åŸç”ŸJS*`String.prototype.trim`çš„Polyfill
```javascript
if (!String.prototype.trim) {
    String.prototype.trim = function () {
        return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
    };
}
```
>æ¥è‡ª[MDN:String.prototype.trim](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#å…¼å®¹æ—§ç¯å¢ƒ)ã€‚

### *åŸç”ŸJS*`String.prototype.repeat`çš„Polyfill
```javascript
if (!String.prototype.repeat) {
  String.prototype.repeat = function (count) {
    'use strict';
    if (this == null) {
      throw new TypeError('can\'t convert ' + this + ' to object');
    }
    var str = '' + this;
    count = +count;
    if (count != count) {
      count = 0;
    }
    if (count < 0) {
      throw new RangeError('repeat count must be non-negative');
    }
    if (count == Infinity) {
      throw new RangeError('repeat count must be less than infinity');
    }
    count = Math.floor(count);
    if (str.length == 0 || count == 0) {
      return '';
    }
    // ç¡®ä¿ count æ˜¯ä¸€ä¸ª 31 ä½çš„æ•´æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¼˜åŒ–çš„ç®—æ³•ã€‚
    // å½“å‰ï¼ˆ2014å¹´8æœˆï¼‰ï¼Œç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸èƒ½æ”¯æŒ 1 << 28 é•¿çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ï¼š
    if (str.length * count >= 1 << 28) {
      throw new RangeError('repeat count must not overflow maximum string size');
    }
    var rpt = '';
    for (; ;) {
      if ((count & 1) == 1) {
        rpt += str;
      }
      count >>>= 1;
      if (count == 0) {
        break;
      }
      str += str;
    }
    return rpt;
  };
}
```
>æ¥è‡ª[MDN:String.prototype.repeat](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/repeat#å¡«å……)ã€‚

### *åŸç”ŸJS*`Number.isNaN`çš„Polyfill
```javascript
Number.isNaN = Number.isNaN || function (value) {
  return typeof value === 'number' && isNaN(value);
};
```
>æ¥è‡ª[MDN:Number.isNaN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill)ã€‚

### *åŸç”ŸJS*`Number.isFinite`çš„Polyfill
```javascript
Number.isFinite = Number.isFinite || function (value) {
  return typeof value === 'number' && isFinite(value);
};
```
>æ¥è‡ª[MDN:Number.isFinite](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill)ã€‚

### *åŸç”ŸJS*`Number.isInteger`çš„Polyfill
```javascript
Number.isInteger = Number.isInteger || function (value) {
  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;
};
```
>æ¥è‡ª[MDN:Number.isInteger](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger#Polyfill)ã€‚

### *åŸç”ŸJS*`Number.isSafeInteger`çš„Polyfill
```javascript
Number.isSafeInteger = Number.isSafeInteger || function (value) {
  return Number.isInteger(value) && Math.abs(value) <= Number.MAX_SAFE_INTEGER;
};
```
>æ¥è‡ª[MDN:Number.isSafeInteger](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger#Polyfill)ã€‚

---
## jQueryæ–¹æ³•

### jQueryæ»šåŠ¨åŠ è½½
1. ä»¥**æ”¾ç½®åœ¨åº•éƒ¨çš„èŠ‚ç‚¹ä¸å±å¹•çš„ç›¸å¯¹è·ç¦»**ä½œä¸ºæ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨çš„åˆ¤æ–­ï¼š

    ```html
    <!--
    data-nextï¼šåŠ è½½å†…å®¹æ ‡è¯†ï¼ˆ-1ï¼šå»é™¤æ»šåŠ¨åŠ è½½åŠŸèƒ½ï¼›0ï¼šå•æ¬¡ä¸åŠ è½½ï¼‰
    data-statusï¼šæ˜¯å¦æ­£åœ¨åŠ è½½ï¼ˆ'ready'ï¼šä¸åœ¨åŠ è½½ä¸­ã€å¯ä»¥è¿›è¡ŒåŠ è½½ï¼›'busy'ï¼šåŠ è½½ä¸­ã€ä¸å…è®¸åŠ è½½ï¼‰
    -->
    <div class="j-load" data-next="1" data-status="ready">æ”¾ç½®åœ¨åº•éƒ¨çš„æ ‡è®°èŠ‚ç‚¹ï¼Œå†…å®¹æ·»åŠ åœ¨æ­¤èŠ‚ç‚¹å‰é¢</div>

    <script>
        var scrollLoadObj = {
            namespace: '', /*äº‹ä»¶å‘½åç©ºé—´*/
            loadMore: function (next) { /*åŠ è½½é€»è¾‘*/
                var $load = $('.j-load'),
                    newNext = 0;

                next = parseInt(next, 10);

                if (next !== -1 && $load.length >= 1) {
                    if ($load.attr('data-status') === 'ready' && next !== 0) {
                        $load.attr('data-status', 'busy');

                        $.ajax({
                            url: '',
                            dataType: 'json',
                            data: {
                                id: next
                            }
                        }).done(function (data) {
                            /* åˆ é™¤é‡å¤å†…å®¹*/
                            /* å…¶ä»–å…·ä½“æ“ä½œ*/

                            newNext = data.next;

                            $load.attr('data-next', newNext);
                        }).fail(function () {
                            console.log('ç½‘ç»œé”™è¯¯');
                        }).always(function () {
                            $load.attr('data-status', 'ready');

                            if (/* æŸæ¡ä»¶*/) {   /* ä¸å†åŠ è½½*/
                                $(window).off('scroll' + '.' + scrollLoadObj.namespace);
                                /*$load.hide();*/
                            } else {
                                scrollLoadObj.autoLoadMore(newNext);
                            }
                        });
                    }
                } else {
                    $(window).off('scroll' + '.' + scrollLoadObj.namespace);
                    /*$load.hide();*/
                }
            },
            autoLoadMore: function (next) { /* è‹¥htmlå°äºè§†çª—åˆ™è§¦å‘åŠ è½½*/
                if ($('html').outerHeight(true) <= $(window).height()) {
                    scrollLoadObj.loadMore(next);
                }
            },
            init: function () {
                if (typeof Date.now !== 'function') {
                    Date.now = function () {
                        return new Date().getTime();
                    };
                }

                scrollLoadObj.namespace = Date.now();

                $(function () {
                    var $load = $('.j-load'),
                        scrollSetTimeoutId;

                    scrollLoadObj.autoLoadMore($load.attr('data-next'));

                    $(window).on('scroll' + '.' + scrollLoadObj.namespace, function () {
                        clearTimeout(scrollSetTimeoutId);

                        scrollSetTimeoutId = setTimeout(function () {
                            if ($load.offset().top <= $(window).scrollTop() + $(window).height()) {  /* èŠ‚ç‚¹é¡¶éƒ¨åœ¨å±å¹•åº•éƒ¨ä»¥ä¸Š*/
                                scrollLoadObj.loadMore($load.attr('data-next'));
                            }
                        }, 200);
                    });
                });
            }
        };


        /* ä½¿ç”¨æµ‹è¯•*/
        scrollLoadObj.init();
    </script>
    ```
2. ä»¥**æ–‡æ¡£æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨**ä½œä¸ºæ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨çš„åˆ¤æ–­ï¼š

    ```html
    <!--
    data-nextï¼šåŠ è½½å†…å®¹æ ‡è¯†ï¼ˆ-1ï¼šå»é™¤æ»šåŠ¨åŠ è½½åŠŸèƒ½ï¼›0ï¼šå•æ¬¡ä¸åŠ è½½ï¼‰
    data-statusï¼šæ˜¯å¦æ­£åœ¨åŠ è½½ï¼ˆ'ready'ï¼šä¸åœ¨åŠ è½½ä¸­ã€å¯ä»¥è¿›è¡ŒåŠ è½½ï¼›'busy'ï¼šåŠ è½½ä¸­ã€ä¸å…è®¸åŠ è½½ï¼‰
    -->
    <div class="j-load" data-next="1" data-status="ready">ä¸ä½œä¸ºæ ‡è®°èŠ‚ç‚¹ï¼Œä»…ä½œä¸ºå†…å®¹æ·»åŠ å®¹å™¨</div>

    <script type="text/javascript">
        var scrollLoadObj = {
            namespace: '', /*äº‹ä»¶å‘½åç©ºé—´*/
            loadMore: function (next) { /*åŠ è½½é€»è¾‘*/
                var $load = $('.j-load'),
                    newNext = 0;

                next = parseInt(next, 10);

                if (next !== -1 && $load.length >= 1) {
                    if ($load.attr('data-status') === 'ready' && next !== 0) {
                        $load.attr('data-status', 'busy');

                        $.ajax({
                            url: '',
                            dataType: 'json',
                            data: {
                                id: next
                            }
                        }).done(function (data) {
                            /* åˆ é™¤é‡å¤å†…å®¹*/
                            /* å…¶ä»–å…·ä½“æ“ä½œ*/

                            newNext = data.next;

                            $load.attr('data-next', newNext);
                        }).fail(function () {
                            console.log('ç½‘ç»œé”™è¯¯');
                        }).always(function () {
                            $load.attr('data-status', 'ready');

                            if (/* æŸæ¡ä»¶*/) {   /* ä¸å†åŠ è½½*/
                                $(window).off('scroll' + '.' + scrollLoadObj.namespace);
                            } else {
                                scrollLoadObj.autoLoadMore(newNext);
                            }
                        });
                    }
                } else {
                    $(window).off('scroll' + '.' + scrollLoadObj.namespace);
                }
            },
            autoLoadMore: function (next) { /* è‹¥htmlå°äºè§†çª—åˆ™è§¦å‘åŠ è½½*/
                if ($('html').outerHeight(true) <= $(window).height()) {
                    scrollLoadObj.loadMore(next);
                }
            },
            init: function () {
                if (typeof Date.now !== 'function') {
                    Date.now = function () {
                        return new Date().getTime();
                    };
                }

                scrollLoadObj.namespace = Date.now();

                $(function () {
                    var $load = $('.j-load'),
                        scrollSetTimeoutId;

                    scrollLoadObj.autoLoadMore($load.attr('data-next'));

                    $(window).on('scroll' + '.' + scrollLoadObj.namespace, function () {
                        clearTimeout(scrollSetTimeoutId);

                        scrollSetTimeoutId = setTimeout(function () {
                            if ($(window).height() + $(window).scrollTop() >= $(document).height()) {  /* æ–‡æ¡£æ»šåŠ¨åˆ°åº•éƒ¨*/
                                scrollLoadObj.loadMore($load.attr('data-next'));
                            }
                        }, 200);
                    });
                });
            }
        };


        /* ä½¿ç”¨æµ‹è¯•*/
        scrollLoadObj.init();
    </script>
    ```

>Zeptoé»˜è®¤æ²¡æœ‰`deferred`çš„å¯¹è±¡ã€æ²¡æœ‰`outerHeight`æ–¹æ³•ã€‚

### jQueryå›¾ç‰‡å»¶æ—¶åŠ è½½
```html
<img src="é»˜è®¤å›¾åœ°å€" data-src="çœŸå®å›¾åœ°å€" data-error="çœŸå®å›¾é”™è¯¯åçš„é»˜è®¤å›¾åœ°å€" class="j-img-1">
<img src="é»˜è®¤å›¾åœ°å€" data-src-user="çœŸå®å›¾åœ°å€" data-error-user="çœŸå®å›¾é”™è¯¯åçš„é»˜è®¤å›¾åœ°å€" class="j-img-2">

<script>
    /**
     * å›¾ç‰‡å»¶æ—¶åŠ è½½
     * @constructor
     * @param {String} className - è§¦å‘çš„ç±»å
     * @param {String} [dataSrc = 'data-src'] - imgæ ‡ç­¾ä¸Šå­˜æ”¾â€œçœŸå®åœ°å€â€çš„å±æ€§
     * @param {Function} func - å›¾ç‰‡åŠ è½½æˆåŠŸåå›è°ƒå‡½æ•°ï¼Œthiså’Œå½¢å‚ä¸ºå›¾ç‰‡DOM
     * @param {String} [dataError = 'data-error'] - imgæ ‡ç­¾ä¸Šå­˜æ”¾â€œçœŸå®åœ°å€åŠ è½½å¤±è´¥åæ˜¾ç¤ºçš„åœ°å€â€çš„å±æ€§
     * @param {Function} errorFunc - å›¾ç‰‡åŠ è½½å¤±è´¥åå›è°ƒå‡½æ•°ï¼Œthiså’Œå½¢å‚ä¸ºå›¾ç‰‡DOM
     */
    function ImgLazyLoad(className, dataSrc, func, dataError, errorFunc) {
        if (typeof Date.now !== 'function') {
            Date.now = function () {
                return new Date().getTime();
            };
        }

        var _timeoutId,
            _namespace = Date.now(), /* äº‹ä»¶å‘½åç©ºé—´*/
            _lazyLoad = function (domArr, className, dataSrc, func, dataError, errorFunc) { /* å›¾ç‰‡å»¶æ—¶åŠ è½½*/
                dataSrc = dataSrc || 'data-src';
                dataError = dataError || 'data-error';

                $.each(domArr, function (index, value) {
                    var $this = $(value);

                    var srcReal = $this.attr(dataSrc),
                        srcError = $this.attr(dataError),
                        newImg = new Image();

                    if (srcReal) {
                        newImg.src = srcReal;

                        newImg.onerror = function () {
                            if (srcError) {
                                $this.attr('src', srcError)
                                    .removeAttr(dataError);
                            }

                            $this.removeClass(className);

                            if (typeof errorFunc === 'function') {
                                errorFunc.call(value, value);
                            }

                            /* é˜²æ­¢å†…å­˜æ³„éœ²*/
                            newImg.onload = null;
                            newImg.onerror = null;
                            newImg = null;
                        };

                        if (newImg.complete) {    /* ç¼“å­˜åŠ è½½*/
                            $this.attr('src', srcReal)
                                .removeAttr(dataSrc)
                                .removeClass(className);

                            if (typeof func === 'function') {
                                func.call(value, value);
                            }

                            /* é˜²æ­¢å†…å­˜æ³„éœ²*/
                            newImg.onerror = null;
                            newImg = null;
                        } else {
                            newImg.onload = function () {   /* æ–°åŠ è½½*/
                                $this.attr('src', srcReal)
                                    .removeAttr(dataSrc)
                                    .removeClass(className);

                                if (typeof func === 'function') {
                                    func.call(value, value);
                                }

                                /* é˜²æ­¢å†…å­˜æ³„éœ²*/
                                newImg.onload = null;
                                newImg.onerror = null;
                                newImg = null;
                            };
                        }
                    } else {
                        if (srcError) {
                            $this.attr('src', srcError)
                                .removeAttr(dataError);
                        }

                        $this.removeClass(className);

                        if (typeof errorFunc === 'function') {
                            errorFunc.call(value, value);
                        }

                        /* é˜²æ­¢å†…å­˜æ³„éœ²*/
                        newImg = null;
                    }
                });
            },
            _getImgArr = function (className, offset) { /* è·å–å±å¹•å†…domæ•°ç»„*/
                var $all = $('.' + className),
                    screenTop = $(window).scrollTop(),
                    screenBottom = screenTop + $(window).height(),
                    domArr = [];

                if (typeof offset !== 'number') {
                    offset = 50;
                }

                $all.each(function (index, element) {
                    var elemTop = $(element).offset().top,
                        elemBottom = elemTop + $(element).height(); /* jQueryå¯ä»¥ç”¨outerHeight*/

                    if (elemTop <= screenBottom + offset && elemBottom >= screenTop - offset) {  /* èŠ‚ç‚¹é¡¶éƒ¨åœ¨å±å¹•åº•éƒ¨ä»¥ä¸Š && èŠ‚ç‚¹åº•éƒ¨åœ¨å±å¹•é¡¶éƒ¨ä»¥ä¸‹*/
                        domArr.push(element);
                    }
                });

                return domArr;
            },
            _run = function (className, func) {    /* è§¦å‘*/
                clearTimeout(_timeoutId);
                _timeoutId = setTimeout(function () {
                    _lazyLoad(_getImgArr(className), className, dataSrc, func, dataError, errorFunc);
                }, 200);
            },
            _init = function (className, func) {
                _run(className, func);

                $(window).on('scroll' + '.' + _namespace, function () {
                    _run(className, func);
                });
            };

        this.stop = function () {    /* è§£ç»‘äº‹ä»¶ç»‘å®š*/
            $(window).off('scroll' + '.' + _namespace);
        };

        _init(className, func);
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    var a = new ImgLazyLoad('j-img-1'),
        b = new ImgLazyLoad(
            'j-img-2',
            'data-src-user',
            function (e) {
                console.log('æˆåŠŸ', this, this === e);
            },
            'data-error-user',
            function (e) {
                console.log('å¤±è´¥', this, this === e);
            }
        );

    //a.stop();
    //b.stop();
</script>
```
[JSFiddle Demo](https://jsfiddle.net/realgeoffrey/j9dkuwwv/)

>æ»šåŠ¨äº‹ä»¶ä»£ç†å¯ä»¥ä»£ç†åœ¨è¦`window`æˆ–ç›‘æ§å›¾ç‰‡åŠ è½½çš„æ»šåŠ¨èŠ‚ç‚¹ä¸Šã€‚

### jQueryèŠ‚ç‚¹è·Ÿéšå±å¹•æ»šåŠ¨
1. `fixed`ï¼š

    ```html
    <style>
        .z-affix-top {
            width: å®½åº¦;
            position: fixed;
            left: ;
            margin-left: ;
            top: ;
        }
        .z-affix-bottom {
            width: å®½åº¦;
            position: absolute;
            left: ;
        }
    </style>

    <script>
        /**
         * è·Ÿéšå±å¹•æ»šåŠ¨ï¼ˆfixedï¼‰
         * @constructor
         * @param {Object} $target - è·Ÿå±ç›®æ ‡çš„jQueryå¯¹è±¡
         * @param {Number} topOffset - è§¦å‘æ·»åŠ topClassçš„è·æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»
         * @param {String} topClass - è·Ÿéšå±å¹•çš„ç±»ï¼Œè¦è§„å®šèŠ‚ç‚¹çš„å®½åº¦ã€ä½ç½®ï¼ˆfixedï¼‰
         * @param {Number} [bottomOffset = 0] - è§¦å‘æ·»åŠ bottomClassçš„è·æ–‡æ¡£åº•éƒ¨çš„è·ç¦»
         * @param {String} [bottomClass = ''] - è§¦åº•çš„ç±»ï¼Œè¦è§„å®šèŠ‚ç‚¹çš„å®½åº¦ã€ä½ç½®ï¼ˆabsoluteï¼‰ï¼Œtopç”±ä»£ç è®¡ç®—è·å¾—
         */
        function FollowFixed($target, topOffset, topClass, bottomOffset, bottomClass) {
          if (typeof Date.now !== 'function') {
            Date.now = function () {
              return new Date().getTime();
            };
          }
        
          var _namespace = Date.now(), //äº‹ä»¶å‘½åç©ºé—´
            _isIE = function (num) {    //åˆ¤æ–­ieç‰ˆæœ¬
              var dom = document.createElement('b');
        
              dom.innerHTML = '<!--[if IE ' + num + ']><i></i><![endif]-->';
        
              return dom.getElementsByTagName('i').length;
            },
            _followFixed = function () {
              var scollTop = $(window).scrollTop(),
                documentHeight = $(document).height(),
                targetHeight = $target.height();   //jQueryå¯ä»¥ç”¨outerHeight
        
              if (scollTop >= topOffset) {    //æ»šåŠ¨è·ç¦»è¶…è¿‡topOffset
                if (!$target.hasClass(bottomClass)) {   //æ²¡æœ‰æ·»åŠ bottomClass
                  if (documentHeight - ($target.offset().top + targetHeight) > bottomOffset) {    //èŠ‚ç‚¹åº•éƒ¨è·ç¦»æ–‡æ¡£åº•éƒ¨è·ç¦» > bottomOffet
                    requestAnimationFrame(function () {
                      $target.removeClass(bottomClass).addClass(topClass)
                        .removeAttr('style');
                    });
                  } else if (bottomClass) {   //è¶…è¿‡bottomOffet,å¹¶ä¸”bottomClasså­˜åœ¨
                    requestAnimationFrame(function () {
                      $target.removeClass(topClass).addClass(bottomClass)
                        .css('top', documentHeight - $target.offsetParent().offset().top - targetHeight - bottomOffset);
                    });
                  }
                } else {    //æ·»åŠ äº†bottomClass
                  if (scollTop < $target.offset().top) {  //æ»šåŠ¨å°äºèŠ‚ç‚¹
                    requestAnimationFrame(function () {
                      $target.removeClass(bottomClass).addClass(topClass)
                        .removeAttr('style');
                    });
                  }
                }
              } else {
                requestAnimationFrame(function () {
                  $target.removeClass(topClass + ' ' + bottomClass)
                    .removeAttr('style');
                });
              }
            };
        
          if (!_isIE(6)) {
            bottomOffset = bottomOffset || 0;
            bottomClass = bottomClass || '';
        
            _followFixed();
        
            $(window).on('scroll' + '.' + _namespace, _followFixed);
          }
        
          this.stop = function () {
            $target.removeClass(topClass + ' ' + bottomClass);
            $(window).off('scroll' + '.' + _namespace);
          };
        }
        
        /* ä½¿ç”¨æµ‹è¯•*/
        var a = new FollowFixed($('.target'), $('.target').offset().top, 'z-affix-top', 200, 'z-affix-bottom');
        
        //a.stop();
    </script>
    ```
    [JSFiddle Demo](https://jsfiddle.net/realgeoffrey/v69fr64x/)
2. `margin-top`ï¼š

    ```html
    <div class="clearfix">
        <div class="father">
            å¯æœ‰å¯æ— çš„ã€å¸¦marginæˆ–ä¸å¸¦marginçš„èŠ‚ç‚¹
            <div class="target">targetå†…å®¹</div>
            å¯æœ‰å¯æ— çš„ã€å¸¦marginæˆ–ä¸å¸¦marginçš„èŠ‚ç‚¹ï¼Œie6ã€7ä¸‹å¯èƒ½éœ€è¦è§¦å‘hasLayout
        </div>
        <div class="dependent">
            çˆ¶çº§çš„å…„å¼ŸèŠ‚ç‚¹
        </div>
    </div>

    <script>
        /**
         * è·Ÿéšå±å¹•æ»šåŠ¨ï¼ˆmargin-topå˜åŒ–ï¼‰
         * @constructor
         * @param {String} target - ç›®æ ‡èŠ‚ç‚¹
         * @param {String} father - ç›®æ ‡èŠ‚ç‚¹çš„çˆ¶çº§èŠ‚ç‚¹
         * @param {String} dependent - ç›®æ ‡èŠ‚ç‚¹çš„çˆ¶çº§èŠ‚ç‚¹çš„å…„å¼Ÿå‚ç…§ç‰©ï¼ˆè·Ÿéšä¸è¶…è¿‡æ­¤å‚ç…§ç‰©ï¼‰
         */
        function FollowMarginTop(target, father, dependent) {
          if (typeof Date.now !== 'function') {
            Date.now = function () {
              return new Date().getTime();
            };
          }
        
          var namespace = Date.now(), /* äº‹ä»¶å‘½åç©ºé—´*/
            $target = $(target),
            startOffset = $target.offset().top,
            targetMarginTop = parseInt($target.css('margin-top'), 10) || 0,
            prevMarginBottom = parseInt($target.prev().css('margin-bottom'), 10) || 0,
            defaultMarginTop = Math.max(targetMarginTop, prevMarginBottom),
            maxMarginTop = $(dependent).height() - $(father).height() + defaultMarginTop; //Queryå¯ä»¥ç”¨outerHeight
        
          $(window).on('scroll' + '.' + namespace, function () {
            var marginTop = $(window).scrollTop() - startOffset + defaultMarginTop;
        
            if (marginTop > defaultMarginTop) {
              if (marginTop > maxMarginTop) {
                marginTop = maxMarginTop;
              }
            } else {
              marginTop = defaultMarginTop;
            }
        
            requestAnimationFrame(function () {
              $target.css({ 'margin-top': marginTop });
            });
          });
        
          this.stop = function () {
            $target.css({ 'margin-top': targetMarginTop });
            $(window).off('scroll' + '.' + namespace);
          };
        }
        
        /* ä½¿ç”¨æµ‹è¯•*/
        var a = new FollowMarginTop('.target', '.father', '.dependent');
        
        //a.stop();
    </script>
    ```
    [JSFiddle Demo](https://jsfiddle.net/realgeoffrey/gc45ehdb/)

### jQueryå¼¹å‡ºtoast
1. jQuery

    ```html
    <style>
        .æ ·å¼ç±» {
            position: fixed;
            _position: absolute;
            left: 50%;
            top: 50%;
            margin-top: -30px;
            margin-left: -450px;
            width: 900px;
            text-align: center;

            p {
                @include inline-block;
                max-width: 840px;
                _width: 840px;
                padding: 15px 30px;
                line-height: 30px;
                font-size: 14px;
                color: #fff;
                word-wrap: break-word;
                background-color: rgba(0, 0, 0, .7);
                filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr=#70000000, endColorStr=#70000000)\9;
                *zoom: 1;
            }
        }
    </style>
    <script>
        function alertToast() {
            if ($('.j-pop-toast').length === 0) {
                $('body').append('<div class="j-pop-toast æ ·å¼ç±»" style="display: none;"><p></p></div>');
            }
    
            var $toast = $('.j-pop-toast'),
                $text = $toast.children('p'),
                self = arguments.callee,
                textArr = [],
                i, text;
    
            clearTimeout(self.setTimeoutId);
    
            for (i = 0; i < arguments.length; i++) {
                textArr.push(arguments[i]);
            }
    
            text = textArr.join('<br>');

            $text.html(text);

            setTimeout(function () {
                $toast.fadeIn(1000);
            }, 0);

            self.setTimeoutId = setTimeout(function () {
                $toast.fadeOut(1000);
            }, 2500);
        }


        /* ä½¿ç”¨æµ‹è¯•*/
        alertToast('<span style="color: red;">red</span>', 'å“ˆå“ˆ');
    </script>
    ```
2. Zepto

    ```html
    <style>
        .æ ·å¼ç±» {
            transition: 1s;
            position: fixed;
            left: 50%;
            top: 50%;
            margin-left: rem(-230);
            margin-top: rem(-49);
            width: rem(460);
            text-align: center;

            p {
                display: inline-block;
                max-width: rem(460);    /*box-sizing: border-box;*/
                min-width: rem(166);
                padding: rem(29) rem(30);
                line-height: rem(40);
                font-size: rem(28);
                color: #fff;
                word-wrap: break-word;
                background-color: rgba(0, 0, 0, .7);
                border-radius: rem(4);
            }
            &.z-hidden {
                visibility: hidden;
                opacity: 0;
            }
        }
    </style>
    <script>
        function alertToast() {
            if ($('.j-pop-toast').length === 0) {
                $('body').append('<div class="j-pop-toast z-hidden æ ·å¼ç±»"><p></p></div>');
            }
    
            var $toast = $('.j-pop-toast'),
                $text = $toast.children('p'),
                self = arguments.callee,
                textArr = [],
                i, text;
    
            clearTimeout(self.setTimeoutId);
    
            for (i = 0; i < arguments.length; i++) {
                textArr.push(arguments[i]);
            }
    
            text = textArr.join('<br>');
    
            $text.html(text);

            setTimeout(function () {
                $toast.removeClass('z-hidden');
            }, 0);
    
            self.setTimeoutId = setTimeout(function () {
                $toast.addClass('z-hidden');
            }, 2500);
        }
     

        /* ä½¿ç”¨æµ‹è¯•*/
       alertToast('<span style="color: red;">red</span>', 'å“ˆå“ˆ');
    </script>
    ```

### jQueryå…¨é€‰ã€å–æ¶ˆå…¨é€‰
```html
<div id="j-form">
  <label for="all">
    <input id="all" type="checkbox" name="all">
    å…¨é€‰
  </label>

  <br>

  <label for="1">
    <input id="1" type="checkbox" name="ones" value="1">
    1
  </label>
  <label for="2">
    <input id="2" type="checkbox" name="ones" value="2">
    2
  </label>
  <label for="3">
    <input id="3" type="checkbox" name="ones" value="3">
    3
  </label>
  <label for="a">
    <input id="a" type="checkbox" name="ones" value="a">
    a
  </label>
  <label for="b">
    <input id="b" type="checkbox" name="ones" value="b">
    b
  </label>
</div>

<a href="#" id="j-submit">æäº¤</a>

<script>
  var $allInput = $('#j-form').find('[name="all"]')
  var $oneInput = $('#j-form').find('[name="ones"]')

  $allInput.on('click', function () {
    $oneInput.prop('checked', this.checked)
  })

  $oneInput.on('click', function () {
    var flag = true

    $oneInput.each(function () {
      if (!this.checked) {
        flag = false

        return false
      }
    })

    $allInput.prop('checked', flag)
  })

  // æäº¤
  $('#j-submit').on('click', function () {
    var arr = []

    $('#j-form').find('[name="ones"]').each(function (index, item) {
      if (item.checked) {
        arr.push($(item).val())
      }
    })

    var data = arr.join(',')

    console.log(data)
  })
</script>
```

### jQueryç‚¹å‡»æŒ‡å®šåŒºåŸŸä»¥å¤–æ‰§è¡Œå‡½æ•°
1. jQuery

    ```javascript
    /**
     * ç‚¹å‡»æŒ‡å®šåŒºåŸŸä»¥å¤–æ‰§è¡Œå‡½æ•°ï¼ˆä¸€æ¬¡æ€§ï¼‰
     * @param {Object} $dom - jQueryèŠ‚ç‚¹
     * @param {Function} callback - å›è°ƒå‡½æ•°
     * @param {Number} [limit] - è‡ªåŠ¨å¤±æ•ˆæ—¶é—´ï¼Œè‹¥æ²¡æœ‰ä¼ æˆ–ä¼ 0åˆ™ä¸ä¼šè‡ªåŠ¨å¤±æ•ˆ
     * @param {String|Number} [namespace = Date.now()] - äº‹ä»¶å‘½åç©ºé—´
     */
    function beyongOneAct($dom, callback, limit, namespace) {
        if (typeof Date.now !== 'function') {
            Date.now = function () {
                return new Date().getTime();
            };
        }

        namespace = namespace || Date.now();

        if (limit) {
            setTimeout(function () {
                $(document).off('click.' + namespace);
            }, limit);
        }

        $(document).on('click.' + namespace, function (e) {
            if (!$dom.is(e.target) && $dom.has(e.target).length === 0) {    /* ç‚¹å‡»ä¸åœ¨æŒ‡å®šåŒºåŸŸå†…*/
                $(document).off('click.' + namespace);

                if (typeof callback === 'function') {
                    callback();
                }
            }
        });
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    beyongOneAct($('.dom1,#dom2'), function () {
        console.log('ç‚¹å‡»åŒºåŸŸå¤–');
    }, 1000);
    ```
    [JSFiddle Demo](https://jsfiddle.net/realgeoffrey/enyxz9a6/)
2. Zepto

    ```javascript
    function beyongOneAct($dom, callback, limit, namespace) {
        if (typeof Date.now !== 'function') {
            Date.now = function () {
                return new Date().getTime();
            };
        }

        namespace = namespace || Date.now();

        if (limit) {
            setTimeout(function () {
                $(document.body).off('click.' + namespace);
            }, limit);
        }

        $(document.body).on('click.' + namespace, function (e) {
            var withinArea = false,
                i;

            for (i = 0; i < $dom.length; i++) {
                if ($dom.get(i) === e.target || $dom.eq(i).has(e.target).length !== 0) {
                    withinArea = true;
                    break;
                }
            }

            if (!withinArea) {    /* ç‚¹å‡»ä¸åœ¨æŒ‡å®šåŒºåŸŸå†…*/
                $(document.body).off('click.' + namespace);

                if (typeof callback === 'function') {
                    callback();
                }
            }
        });
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    beyongOneAct($('.dom1,#dom2'), function () {
        console.log('ç‚¹å‡»åŒºåŸŸå¤–');
    }, 1000);
    ```
    [JSFiddle Demo](https://jsfiddle.net/realgeoffrey/mvv9wxnw/)

### jQuery hoverå±•ç¤ºå†…å®¹å¹¶ä¸”å¯è·¨è¶Šé—´éš™åˆ°å†…å®¹
```html
<div class="j-box">
    <div class="j-trigger">
        hover
    </div>
    
    <div class="j-bullet" style="display: none;">
        å±•ç¤ºå†…å®¹
    </div>
</div>

<script type="text/javascript">
    var globalObj = {setTimeoutId: ''};

    $(document).on('mouseenter', '.j-trigger', function () {
        clearTimeout(globalObj.setTimeoutId);

        $(this).closest('.j-box').find('.j-bullet').show();
    }).on('mouseleave', '.j-trigger', function () {
        clearTimeout(globalObj.setTimeoutId);

        globalObj.setTimeoutId = setTimeout(function () {
            $('.j-bullet').hide();
        }, 500);
    }).on('mouseenter', '.j-bullet', function () {
        clearTimeout(globalObj.setTimeoutId);
    }).on('mouseleave', '.j-bullet', function () {
        globalObj.setTimeoutId = setTimeout(function () {
            $('.j-bullet').hide();
        }, 100);
    });
</script>
```
[JSFiddle Demo](https://jsfiddle.net/realgeoffrey/zs6a7aco/)

### jQueryå¯åŠ¨ã€æš‚åœCSSåŠ¨ç”»
```html
<style>
    .dom.z-hover {
        animation: func 1s infinite;
    }
    @keyframes func {

    }
</style>

<div class="dom j-dom-1">...</div>
<div class="dom j-dom-2">...</div>

<script>
    /**
     * hoverè§¦å‘animation
     * @constructor
     * @param {String} selector - é€‰æ‹©å™¨
     * @param {String} hoverClass - ç±»å
     */
    function AnimationHover(selector, hoverClass) {
        if (typeof Date.now !== 'function') {
            Date.now = function () {
                return new Date().getTime();
            };
        }

        var _isStop = false, //åœæ­¢åŠ¨ç”»flag
            _namespace = Date.now(), //äº‹ä»¶å‘½åç©ºé—´
            _init = function (selector, hoverClass) {
                $(document).on('mouseenter' + '.' + _namespace, selector, function () {
                    $(this).addClass(hoverClass);

                    _isStop = false;
                }).on('mouseleave' + '.' + _namespace, selector, function () {
                    _isStop = true;
                }).on('animationiteration' + '.' + _namespace, selector, function () {
                    if (_isStop) {
                        $(this).removeClass(hoverClass);

                        _isStop = false;
                    }
                });
            };

        _init(selector, hoverClass);

        this.stop = function () {
            $(selector).removeClass(hoverClass);

            $(document).off('mouseenter' + '.' + _namespace + ' ' + 'mouseleave' + '.' + _namespace + ' ' + 'animationiteration' + '.' + _namespace, selector);
        }
    }


    /* ä½¿ç”¨æµ‹è¯•*/
    var a = new AnimationHover('.j-dom-1', 'z-hover');
    var b = new AnimationHover('.j-dom-2', 'z-hover');

    //a.stop;
    //b.stop;
</script>
```
[JSFiddle Demo](https://jsfiddle.net/realgeoffrey/Lukonj4s/)

### jQueryè·å–`HTTP response header`ä¿¡æ¯
```javascript
/**
 * è·å–HTTP response headerä¿¡æ¯
 * @param {String} [requestName] - åè®®å¤´å­—æ®µåï¼›è‹¥ä¸ä¼ å€¼ï¼Œåˆ™è¿”å›å®Œæ•´HTTPå¤´
 * @returns {String|Boolean} text - HTTPå¤´ä¿¡æ¯ æˆ– '' æˆ– false
 */
function getResponseHeaders(requestName) {
    var text = '';

    $.ajax({
        type: 'HEAD',
        url: document.location.href,
        async: false,
        complete: function (xhr, data) {
            var responseHeaders, headerArr, i;

            if (data !== 'error' && data !== 'timeout' && data !== 'parsererror') {
                responseHeaders = xhr.getAllResponseHeaders();

                if (requestName) {
                    requestName += ': ';

                    headerArr = responseHeaders.split(/[\r\n]+/);

                    for (i = 0; i < headerArr.length; i++) {
                        if (headerArr[i].indexOf(requestName) === 0) {
                            text = headerArr[i].slice(requestName.length);

                            break;
                        }
                    }
                } else {
                    text = responseHeaders;
                }
            } else {
                text = false;

                console.log('è·å–å¤´ä¿¡æ¯é”™è¯¯: ' + data);
            }
        }
    });

    return text;
}
```

### jQueryä¿®å¤HTMLæ ‡ç­¾`placeholder`å±æ€§æ— æ•ˆ
```javascript
function fixPlaceholder($dom) {
    $dom = $dom || $('input, textarea');

    if (!('placeholder' in document.createElement('input'))) {
        $dom.each(function (index, element) {
            var placeText = $(element).attr('placeholder');

            if ($(element).val() === '') {
                $(element).val(placeText);
            }

            $(this).on('focus', function () {
                if ($(this).val() === placeText) {
                    $(this).val('');
                }
            }).on('blur', function () {
                if ($(this).val() === '') {
                    $(this).val(placeText);
                }
            });
        });
    }
}
```

### jQueryæ¨¡æ‹Ÿæ‰‹æœºç¿»è½¬ï¼ˆä½¿é¡µé¢éƒ½ä»¥â€œæ¨ªå±â€å±•ç¤ºï¼‰
```html
<style>
    .dom {
        position: fixed;
        top: 0;
        left: 0;
    }
    .z-reversal {
        top: 50%;
        left: 50%;
        /*margin: 0;*/
        -webkit-transform: translate(-50%, -50%) rotate(90deg);
        transform: translate(-50%, -50%) rotate(90deg);
    }
</style>

<div class="dom" id="j-dom-1">...</div>
<div class="dom" id="j-dom-2">...</div>

<script type="text/javascript">
    /**
     * æ¨ªå±å±•ç¤º
     * @constructor
     * @param {String} selector - é€‰æ‹©å™¨
     * @param {String} className - ç¿»è½¬ç±»
     */
    var ReversalAct = function (selector, className) {
        if (typeof Date.now !== 'function') {
            Date.now = function () {
                return new Date().getTime();
            };
        }

        var _setTimeoutId1 = '',
            _setTimeoutId2 = '',
            _namespace = Date.now(),
            _resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize',
            _portraitFunc = function (selector, className) {    /* å±å¹•é«˜åº¦>å®½åº¦ï¼ˆç«–å±ï¼‰ï¼Œå¢åŠ â€œé¡ºæ—¶é’ˆç¿»è½¬90åº¦çš„ç±»â€*/
                var $dom = $(selector);

                if ($(window).height() > $(window).width()) {
                    $dom.addClass(className);
                } else {
                    $dom.removeClass(className);
                }
            },
            _resizeFunc = function (selector) {   /* è®¾ç½®é«˜å®½çš„å€¼ï¼ˆè¾¹é•¿è¾ƒé•¿çš„ä¸€è¾¹è®¾ç½®ä¸ºå®½åº¦ï¼Œè¾ƒçŸ­çš„è®¾ç½®ä¸ºé«˜åº¦ï¼‰*/
                var wHeight = $(window).height(),
                    wWidth = $(window).width(),
                    i;

                if (wHeight > wWidth) {
                    i = wHeight;
                    wHeight = wWidth;
                    wWidth = i;
                }

                $(selector).css({'width': wWidth + 'px', 'height': wHeight + 'px'});
            },
            _bindEvent = function (selector, className) {
                $(window).on('resize' + '.' + _namespace, function () {
                    clearTimeout(_setTimeoutId2);

                    _setTimeoutId2 = setTimeout(function () {
                        _resizeFunc(selector);
                    }, 500);
                }).on(_resizeEvent + '.' + _namespace, function () {
                    clearTimeout(_setTimeoutId1);

                    _setTimeoutId1 = setTimeout(function () {
                        _portraitFunc(selector, className);
                    }, 500);
                });
            },
            _init = function (selector, className) {
                _bindEvent(selector, className);
                _resizeFunc(selector);
                _portraitFunc(selector, className);
            };

        _init(selector, className);

        this.stop = function () {
            $(window).off('resize' + '.' + _namespace)
                .off(_resizeEvent + '.' + _namespace);

            $(selector).removeClass(className)
                .removeAttr('style');
        };
    };


    /* ä½¿ç”¨æµ‹è¯•*/
    var a = new ReversalAct('#j-dom-1, #j-dom-2', 'z-reversal');

    //a.stop();
</script>
```
>å¦‚æœå¯¹ä¸æ˜¯å…¨å±çš„èŠ‚ç‚¹ä½¿ç”¨ç¿»è½¬å‡½æ•°ï¼Œéœ€è¦ç»™èŠ‚ç‚¹è®¾ç½®ï¼š`width: å®½åº¦ !important;height: auto !important;`ã€‚
